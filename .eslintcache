[{"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\index.tsx":"1","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\App.tsx":"2","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\context.ts":"3","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\test.object.assign.ts":"4","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\model\\Image.ts":"5","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\widgets\\header.tsx":"6","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\browse-page.tsx":"7","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\check-md5.tsx":"8","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\one-source-page.tsx":"9","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\check-source.tsx":"10","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\scan-dir.tsx":"11","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\unscanned.tsx":"12","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\scan-meta.tsx":"13","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\source-meta.tsx":"14","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\Sidebar.tsx":"15","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\ImageStream.tsx":"16","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\GalleryInScroll.tsx":"17","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\my-gallery.tsx":"18","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\MyPhoto.tsx":"19","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\test\\visibility-test.tsx":"20","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\stream-render-gallery.tsx":"21","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\stream-render-simple.tsx":"22","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\stream-page.tsx":"23"},{"size":232,"mtime":1611940295847,"results":"24","hashOfConfig":"25"},{"size":2907,"mtime":1613035090988,"results":"26","hashOfConfig":"25"},{"size":1074,"mtime":1612132311656,"results":"27","hashOfConfig":"25"},{"size":215,"mtime":1611940295898,"results":"28","hashOfConfig":"25"},{"size":3122,"mtime":1612955171455,"results":"29","hashOfConfig":"25"},{"size":588,"mtime":1613035189160,"results":"30","hashOfConfig":"25"},{"size":1371,"mtime":1612912252858,"results":"31","hashOfConfig":"25"},{"size":3278,"mtime":1612948608109,"results":"32","hashOfConfig":"25"},{"size":2052,"mtime":1612437631617,"results":"33","hashOfConfig":"25"},{"size":1515,"mtime":1612948810317,"results":"34","hashOfConfig":"25"},{"size":3450,"mtime":1612437069290,"results":"35","hashOfConfig":"25"},{"size":2700,"mtime":1612948655590,"results":"36","hashOfConfig":"25"},{"size":1965,"mtime":1612948641826,"results":"37","hashOfConfig":"25"},{"size":1096,"mtime":1612436176938,"results":"38","hashOfConfig":"25"},{"size":2073,"mtime":1613035666916,"results":"39","hashOfConfig":"25"},{"size":3621,"mtime":1613035760971,"results":"40","hashOfConfig":"25"},{"size":3083,"mtime":1612961577275,"results":"41","hashOfConfig":"25"},{"size":3690,"mtime":1613036065484,"results":"42","hashOfConfig":"25"},{"size":2161,"mtime":1612958151896,"results":"43","hashOfConfig":"25"},{"size":1566,"mtime":1612983415696,"results":"44","hashOfConfig":"25"},{"size":359,"mtime":1613034923842,"results":"45","hashOfConfig":"25"},{"size":500,"mtime":1613034716736,"results":"46","hashOfConfig":"25"},{"size":763,"mtime":1613036299673,"results":"47","hashOfConfig":"25"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"1pqf0us",{"filePath":"51","messages":"52","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53","usedDeprecatedRules":"50"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"80","usedDeprecatedRules":"50"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"50"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"50"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"89","messages":"90","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"91","usedDeprecatedRules":"50"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\index.tsx",[],["100","101"],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\App.tsx",["102","103"],"import React from \"react\";\nimport ImageStream from \"./stream/ImageStream\";\nimport { AppContext, context } from \"./context\";\n// @ts-ignore\nimport axios from \"redaxios\";\n\nimport ScaleLoader from \"react-spinners/ScaleLoader\";\nimport { Sidebar } from \"./stream/Sidebar\";\nimport \"./test.object.assign\";\nimport { Header } from \"./widgets/header\";\nimport \"./app.css\";\nimport { Route, Switch } from \"wouter\";\nimport BrowsePage from \"./browse/browse-page\";\nimport OneSourcePage from \"./browse/one-source-page\";\nimport { QueryClient, QueryClientProvider } from \"react-query\";\nimport { ReactQueryDevtools } from \"react-query/devtools\";\nimport { VisibilityTest } from \"./test/visibility-test\";\nimport StreamPage from \"./stream/stream-page\";\n\ninterface IAppProps {}\n\nexport interface Source {\n\tid: number;\n\tname: string;\n\tpath: string;\n\tthumbRoot: string;\n\tfiles: number;\n\tfolders: number;\n\tmd5: string;\n\t_missingProperties: [];\n}\n\nexport interface IAppState {\n\tstatus?: \"ok\";\n\tmin?: string;\n\tmax?: string;\n\tsources: Source[];\n\tquery?: string;\n\tduration?: number;\n\tsourceID?: number;\n}\n\nconst queryClient = new QueryClient();\n\nexport default class App extends React.Component<IAppProps, IAppState> {\n\tstatic contextType = context;\n\t// @ts-ignore\n\tcontext: AppContext;\n\tbaseUrl: URL | undefined;\n\n\tstate: IAppState = {\n\t\tsources: [],\n\t\tsourceID: undefined,\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.baseUrl = this.context.baseUrl;\n\t\t// noinspection JSIgnoredPromiseFromCall\n\t\tthis.fetchRange();\n\t}\n\n\tasync fetchRange() {\n\t\tconst urlInfo = new URL(\"Info\", this.baseUrl);\n\t\tconst res = await axios.get(urlInfo.toString());\n\t\t// console.log(res.data);\n\t\tconst resData = res.data;\n\t\tif (resData.status !== \"ok\") {\n\t\t\tthrow new Error(resData.error);\n\t\t}\n\t\t// console.log(resData);\n\t\tthis.setState(resData);\n\t}\n\n\tsetSource(id?: number) {\n\t\tconsole.log(\"setSource\", id);\n\t\tthis.setState({ sourceID: id });\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<QueryClientProvider client={queryClient}>\n\t\t\t\t<div className=\"container\" style={{ width: \"100%\", maxWidth: \"100%\" }}>\n\t\t\t\t\t<Header />\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route path=\"/\">\n\t\t\t\t\t\t\t<StreamPage\n\t\t\t\t\t\t\t\tsources={this.state.sources}\n\t\t\t\t\t\t\t\tsourceID={this.state.sourceID}\n\t\t\t\t\t\t\t\tsetSource={this.setSource.bind(this)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Route path=\"/browse\">\n\t\t\t\t\t\t\t{this.state.sources ? (\n\t\t\t\t\t\t\t\t<BrowsePage\n\t\t\t\t\t\t\t\t\tsources={this.state.sources || []}\n\t\t\t\t\t\t\t\t\treloadSources={this.fetchRange.bind(this)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<ScaleLoader />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Route path=\"/browse/:slug\">\n\t\t\t\t\t\t\t{(params) => (\n\t\t\t\t\t\t\t\t<OneSourcePage\n\t\t\t\t\t\t\t\t\tname={params.slug}\n\t\t\t\t\t\t\t\t\tsources={this.state.sources || []}\n\t\t\t\t\t\t\t\t\treloadSources={this.fetchRange.bind(this)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Route path=\"/visibility\" component={VisibilityTest} />\n\t\t\t\t\t</Switch>\n\t\t\t\t</div>\n\t\t\t\t<ReactQueryDevtools initialIsOpen={true} />\n\t\t\t</QueryClientProvider>\n\t\t);\n\t}\n}\n","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\context.ts",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\test.object.assign.ts",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\model\\Image.ts",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\widgets\\header.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\browse-page.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\check-md5.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\one-source-page.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\check-source.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\scan-dir.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\unscanned.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\scan-meta.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\source-meta.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\Sidebar.tsx",["104","105"],"import React, { FormEvent } from \"react\";\nimport { AppContext, context } from \"../context\";\nimport { Source } from \"../App\";\n\ninterface ISidebarProps {\n\tsources: Source[];\n\tsourceID?: number;\n\tsetSource: (id?: number) => void;\n}\n\ninterface ISidebarState {\n\tminWidth?: number;\n}\n\nexport class Sidebar extends React.Component<ISidebarProps, ISidebarState> {\n\tstatic contextType = context;\n\t// @ts-ignore\n\tcontext: AppContext;\n\n\tstate: ISidebarState = {};\n\n\tconstructor(props: any, context: any) {\n\t\tsuper(props, context);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.postConstruct();\n\t}\n\n\tpostConstruct() {\n\t\tif (this.context) {\n\t\t\tlet minWidth = this.context.sidebar?.minWidth;\n\t\t\tconsole.log(\"setState(minWidth)\", minWidth);\n\t\t\t// this.setState({\n\t\t\t// \tminWidth: minWidth,\n\t\t\t// });\n\t\t\tthis.state.minWidth = minWidth;\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<ul className=\"pb-2\">\n\t\t\t\t\t{this.getSourceLi({ id: undefined, name: \"All\" })}\n\t\t\t\t\t{this.props.sources.map((source: Source) => this.getSourceLi(source))}\n\t\t\t\t</ul>\n\t\t\t\t<form onSubmit={this.onSubmit.bind(this)}>\n\t\t\t\t\t<label htmlFor=\"minWidth\">Min Width</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"u-full-width\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tplaceholder=\"minWidth\"\n\t\t\t\t\t\tid=\"minWidth\"\n\t\t\t\t\t\tname=\"minWidth\"\n\t\t\t\t\t\tdefaultValue={this.state.minWidth}\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\tthis.setState({ minWidth: parseInt(e.target.value) })\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<input className=\"button-primary\" type=\"submit\" value=\"Submit\" />\n\t\t\t\t</form>\n\t\t\t</>\n\t\t);\n\t}\n\n\tprivate getSourceLi(source: { id?: number; name: string }) {\n\t\treturn (\n\t\t\t<li key={source.id}>\n\t\t\t\t<button\n\t\t\t\t\tonClick={(e: React.MouseEvent) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn this.props.setSource(source.id);\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={this.props.sourceID === source.id ? \"active\" : \"\"}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tfontWeight: this.props.sourceID === source.id ? \"bold\" : undefined,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{source.name}\n\t\t\t\t</button>\n\t\t\t</li>\n\t\t);\n\t}\n\n\tonSubmit(e: FormEvent) {\n\t\te.preventDefault();\n\t\tthis.context.setState({\n\t\t\tsidebar: {\n\t\t\t\tminWidth: this.state.minWidth,\n\t\t\t},\n\t\t});\n\t}\n}\n","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\ImageStream.tsx",["106"],"import React from \"react\";\nimport axios from \"redaxios\";\nimport { Image } from \"../model/Image\";\nimport moment from \"moment\";\nimport { AppContext, context } from \"../context\";\nimport StreamRenderGallery from \"./stream-render-gallery\";\nimport StreamRenderSimple from \"./stream-render-simple\";\n\ninterface IAppProps {\n\tsourceID?: number;\n}\n\ninterface IAppState {\n\tstart: Date;\n\titems: Image[];\n\tend?: Date;\n}\n\nexport default class ImageStream extends React.Component<IAppProps, IAppState> {\n\tstate: IAppState = {\n\t\tstart: new Date(),\n\t\titems: [],\n\t\tend: undefined,\n\t};\n\n\tstatic contextType = context;\n\t// @ts-ignore\n\tcontext: AppContext;\n\n\tbaseUrl: URL = new URL(document.location.href);\n\n\tcomponentDidMount() {\n\t\tthis.baseUrl = this.context.baseUrl;\n\t\tif (this.context.lastTopTimestamp) {\n\t\t\t// this.setState({\n\t\t\t// \tend: this.context.lastTopTimestamp,\n\t\t\t// });\n\t\t\tthis.state.end = this.context.lastTopTimestamp;\n\t\t}\n\t\tthis.fetchData().then();\n\t}\n\n\tasync fetchData() {\n\t\tconst images = await this.fetchDataFromFilterServer();\n\t\tthis.appendImages(images);\n\t}\n\n\tasync fetchDataFromFilterServer() {\n\t\tconst urlImages = new URL(process.env.REACT_APP_API + \"Images\");\n\t\tthis.appendSearchParams(urlImages);\n\t\t//console.log(urlImages);\n\t\tconst res = await axios.get(urlImages.toString());\n\t\t// console.log(res.data);\n\t\tconst resData = res.data;\n\t\tif (resData.status !== \"ok\") {\n\t\t\tthrow new Error(resData.error);\n\t\t}\n\n\t\tconst images: Image[] = resData.data.map((el: Image) => new Image(el));\n\t\treturn images;\n\t}\n\n\tappendSearchParams(urlImages: URL) {\n\t\tif (this.props.sourceID) {\n\t\t\turlImages.searchParams.set(\"source\", this.props.sourceID.toString());\n\t\t}\n\t\turlImages.searchParams.set(\n\t\t\t\"since\",\n\t\t\tmoment(this.state.end || this.state.start).format(\"YYYY-MM-DD HH:mm:ss\")\n\t\t);\n\t\tlet minWidth = this.context.sidebar?.minWidth;\n\t\tif (minWidth) {\n\t\t\turlImages.searchParams.set(\"minWidth\", minWidth.toString());\n\t\t}\n\t}\n\n\tappendImages(images: any[]) {\n\t\tif (!images.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst lastImage = images[images.length - 1];\n\t\tconst lastDate = lastImage.getTimestamp();\n\t\t// console.log(lastImage, lastDate);\n\t\tthis.setState(\n\t\t\t({ items }) => {\n\t\t\t\t// append if not id exists\n\t\t\t\timages.map((nnew: Image) => {\n\t\t\t\t\tif (!items.some((el) => el.id === nnew.id)) {\n\t\t\t\t\t\tnnew.baseUrl = this.baseUrl?.toString();\n\t\t\t\t\t\treturn items.push(nnew);\n\t\t\t\t\t}\n\t\t\t\t\treturn \"x\";\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\titems,\n\t\t\t\t\tend: lastDate,\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\t// console.log(this.state.items.map((el: Image) => el.id));\n\t\t\t}\n\t\t);\n\t}\n\n\tget queryParams() {\n\t\tconst url = new URL(document.location.href);\n\t\treturn url.searchParams;\n\t}\n\n\trender() {\n\t\tconsole.log(this.state.items.length);\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"p-2\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackground: \"#33C3F0\",\n\t\t\t\t\t\tposition: \"sticky\",\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tzIndex: 100,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tImages: {this.state.items.length}\n\t\t\t\t</div>\n\t\t\t\t{this.queryParams.has(\"simple\") ? (\n\t\t\t\t\t<StreamRenderSimple\n\t\t\t\t\t\tphotos={this.state.items}\n\t\t\t\t\t\tnext={this.fetchData.bind(this)}\n\t\t\t\t\t\trefresh={this.refresh.bind(this)}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<StreamRenderGallery\n\t\t\t\t\t\tphotos={this.state.items}\n\t\t\t\t\t\tnext={this.fetchData.bind(this)}\n\t\t\t\t\t\trefresh={this.refresh.bind(this)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidUpdate(\n\t\tprevProps: Readonly<IAppProps>,\n\t\tnextState: Readonly<IAppState>,\n\t\tnextContext: any\n\t): boolean {\n\t\tconst yes = this.props.sourceID !== prevProps.sourceID;\n\t\tif (yes) {\n\t\t\tthis.setState({ items: [], start: new Date(), end: undefined }, () =>\n\t\t\t\tthis.fetchData().then()\n\t\t\t);\n\t\t}\n\t\treturn yes;\n\t}\n\n\trefresh() {\n\t\tconsole.log(\"refresh\");\n\t}\n}\n","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\GalleryInScroll.tsx",["107"],"import { Image } from \"../model/Image\";\nimport React from \"react\";\nimport Carousel, { Modal, ModalGateway } from \"react-images\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { AppContext, context } from \"../context\";\nimport { MyGallery } from \"./my-gallery\";\nimport ScaleLoader from \"react-spinners/ScaleLoader\";\nimport { PhotoProps } from \"react-photo-gallery\";\n\nexport interface PhotoSetItem extends PhotoProps {\n\tkey?: string;\n\tsrc: string;\n\twidth: number;\n\theight: number;\n\timage?: Image;\n}\n\ninterface IGalleryInScrollProps {\n\tphotos: Image[];\n\tnext: any;\n\trefreshFunction: () => void;\n}\n\nexport class GalleryInScroll extends React.Component<\n\tIGalleryInScrollProps,\n\t{\n\t\tcurrentImage?: number;\n\t\tviewerIsOpen: boolean;\n\t}\n> {\n\tstatic contextType = context;\n\t// @ts-ignore\n\tcontext: AppContext;\n\n\tstate = {\n\t\tcurrentImage: 0,\n\t\tviewerIsOpen: false,\n\t};\n\n\tcomponentDidMount() {\n\t\t// console.log(\n\t\t// \tthis.props.photos.map(\n\t\t// \t\t(p: Image) => p.path + \" [\" + p.getWidth() + \"x\" + p.getHeight() + \"]\"\n\t\t// \t)\n\t\t// );\n\t}\n\n\tphotoItems(): PhotoSetItem[] {\n\t\tconst photoSet = this.props.photos.map((img: Image) => {\n\t\t\t// console.log(img);\n\t\t\treturn {\n\t\t\t\tsrc: img.thumbURL,\n\t\t\t\twidth: img.getWidth(),\n\t\t\t\theight: img.getHeight(),\n\t\t\t\timage: img,\n\t\t\t} as PhotoSetItem;\n\t\t});\n\t\t//console.log(photoSet.map(el => el.src + ' [' + el.width + 'x' + el.height + ']'));\n\t\treturn photoSet;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<InfiniteScroll\n\t\t\t\t\tdataLength={this.photoItems().length} //This is important field to render the next data\n\t\t\t\t\tnext={this.props.next}\n\t\t\t\t\thasMore={true}\n\t\t\t\t\thasChildren={false}\n\t\t\t\t\tloader={() => null}\n\t\t\t\t\t/*<h4 style={{ minHeight: 30 }}>*/\n\t\t\t\t\t/*\t<ScaleLoader loading={true} color=\"#4DAF7C\" /> Loading...*/\n\t\t\t\t\t/*</h4>*/\n\t\t\t\t\t/*}*/\n\t\t\t\t\tendMessage={\n\t\t\t\t\t\t<p style={{ textAlign: \"center\" }}>\n\t\t\t\t\t\t\t<b>Yay! You have seen it all</b>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t}\n\t\t\t\t\t// below props only if you need pull down functionality\n\t\t\t\t\trefreshFunction={this.props.refreshFunction}\n\t\t\t\t\tpullDownToRefresh\n\t\t\t\t\tpullDownToRefreshContent={\n\t\t\t\t\t\t<h3 style={{ textAlign: \"center\" }}>\n\t\t\t\t\t\t\t&#8595; Pull down to refresh\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t}\n\t\t\t\t\treleaseToRefreshContent={\n\t\t\t\t\t\t<h3 style={{ textAlign: \"center\" }}>&#8593; Release to refresh</h3>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<MyGallery\n\t\t\t\t\t\tphotos={this.photoItems()}\n\t\t\t\t\t\topenLightbox={this.openLightbox.bind(this)}\n\t\t\t\t\t/>\n\t\t\t\t</InfiniteScroll>\n\n\t\t\t\t<ModalGateway>\n\t\t\t\t\t{this.state.viewerIsOpen ? (\n\t\t\t\t\t\t<Modal onClose={this.closeLightbox.bind(this)}>\n\t\t\t\t\t\t\t<Carousel\n\t\t\t\t\t\t\t\tcurrentIndex={this.state.currentImage}\n\t\t\t\t\t\t\t\tviews={this.props.photos.map((x: Image) => ({\n\t\t\t\t\t\t\t\t\t...x,\n\t\t\t\t\t\t\t\t\tsource: {\n\t\t\t\t\t\t\t\t\t\tthumbnail: x.thumbURL,\n\t\t\t\t\t\t\t\t\t\tregular: x.originalURL,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tcaption: x.title,\n\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Modal>\n\t\t\t\t\t) : null}\n\t\t\t\t</ModalGateway>\n\t\t\t</div>\n\t\t);\n\t}\n\n\topenLightbox(index: number) {\n\t\tconsole.log(\"image\", index);\n\t\tthis.setState({\n\t\t\tcurrentImage: index,\n\t\t\tviewerIsOpen: true,\n\t\t});\n\t}\n\n\tcloseLightbox() {\n\t\tthis.setState({\n\t\t\tviewerIsOpen: false,\n\t\t});\n\t}\n}\n","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\my-gallery.tsx",["108"],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\MyPhoto.tsx",["109"],"import React from \"react\";\nimport { PhotoProps, RenderImageProps } from \"react-photo-gallery\";\nimport moment from \"moment\";\nimport { PhotoSetItem } from \"./GalleryInScroll\";\n\ninterface Props {\n\tindex: number;\n\tdirection: \"row\" | \"column\";\n\tleft?: number;\n\ttop?: number;\n\tphoto: PhotoProps<PhotoSetItem>;\n\tonClick: (e: React.MouseEvent, photo: PhotoProps, index: number) => void;\n}\n\ninterface MyPhotoState {\n\tshowOverlay: boolean;\n}\n\nexport class MyPhoto extends React.Component<Props, MyPhotoState> {\n\tmargin = 2;\n\tstate: MyPhotoState = {\n\t\tshowOverlay: false,\n\t};\n\n\trender() {\n\t\t//console.log(this.props);\n\t\tlet cont: any = {\n\t\t\tmargin: this.margin,\n\t\t\tposition: \"relative\",\n\t\t\twidth: this.props.photo.width,\n\t\t\theight: this.props.photo.height,\n\t\t};\n\t\tif (this.props.direction === \"column\") {\n\t\t\tcont.position = \"absolute\";\n\t\t\tcont.left = this.props.left;\n\t\t\tcont.top = this.props.top;\n\t\t}\n\t\treturn (\n\t\t\t<div\n\t\t\t\t// key={this.props.key}\n\t\t\t\tstyle={cont}\n\t\t\t\tonClick={(e) =>\n\t\t\t\t\tthis.props.onClick\n\t\t\t\t\t\t? this.props.onClick(e, this.props.photo, this.props.index)\n\t\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tsrc={this.props.photo.src}\n\t\t\t\t\twidth={this.props.photo.width}\n\t\t\t\t\theight={this.props.photo.height}\n\t\t\t\t\tonMouseEnter={this.showOverlay.bind(this)}\n\t\t\t\t\tonMouseLeave={this.hideOverlay.bind(this)}\n\t\t\t\t\talt={this.props.photo.src}\n\t\t\t\t\ttitle={\n\t\t\t\t\t\tthis.props.photo.image?.getWidth() +\n\t\t\t\t\t\t\"x\" +\n\t\t\t\t\t\tthis.props.photo.image?.getHeight()\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{this.state.showOverlay && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\ttextAlign: \"center\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackground: \"black\",\n\t\t\t\t\t\t\t\topacity: 0.5,\n\t\t\t\t\t\t\t\tpadding: \"0.5em\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div style={{ opacity: 1 }}>\n\t\t\t\t\t\t\t\tPath: {this.props.photo.image?.path}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{moment(this.props.photo.image?.getTimestamp()).format(\n\t\t\t\t\t\t\t\t\t\"YYYY-MM-DD HH:mm:ss\"\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tshowOverlay() {\n\t\tthis.setState({\n\t\t\tshowOverlay: true,\n\t\t});\n\t}\n\n\thideOverlay() {\n\t\tthis.setState({\n\t\t\tshowOverlay: false,\n\t\t});\n\t}\n}\n","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\test\\visibility-test.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\stream-render-gallery.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\stream-render-simple.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\stream-page.tsx",[],{"ruleId":"110","replacedBy":"111"},{"ruleId":"112","replacedBy":"113"},{"ruleId":"114","severity":1,"message":"115","line":2,"column":8,"nodeType":"116","messageId":"117","endLine":2,"endColumn":19},{"ruleId":"114","severity":1,"message":"118","line":8,"column":10,"nodeType":"116","messageId":"117","endLine":8,"endColumn":17},{"ruleId":"119","severity":1,"message":"120","line":22,"column":2,"nodeType":"121","messageId":"122","endLine":24,"endColumn":3},{"ruleId":"123","severity":1,"message":"124","line":37,"column":4,"nodeType":"125","endLine":37,"endColumn":14},{"ruleId":"123","severity":1,"message":"124","line":38,"column":4,"nodeType":"125","endLine":38,"endColumn":14},{"ruleId":"114","severity":1,"message":"126","line":7,"column":8,"nodeType":"116","messageId":"117","endLine":7,"endColumn":19},{"ruleId":"114","severity":1,"message":"127","line":15,"column":7,"nodeType":"116","messageId":"117","endLine":15,"endColumn":30},{"ruleId":"114","severity":1,"message":"128","line":2,"column":22,"nodeType":"116","messageId":"117","endLine":2,"endColumn":38},"no-native-reassign",["129"],"no-negated-in-lhs",["130"],"@typescript-eslint/no-unused-vars","'ImageStream' is defined but never used.","Identifier","unusedVar","'Sidebar' is defined but never used.","@typescript-eslint/no-useless-constructor","Useless constructor.","MethodDefinition","noUselessConstructor","react/no-direct-mutation-state","Do not mutate state directly. Use setState().","MemberExpression","'ScaleLoader' is defined but never used.","'ImageRenderIntersection' is defined but never used.","'RenderImageProps' is defined but never used.","no-global-assign","no-unsafe-negation"]