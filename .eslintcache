[{"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\index.tsx":"1","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\App.tsx":"2","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\context.ts":"3","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\test.object.assign.ts":"4","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\model\\Image.ts":"5","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\widgets\\header.tsx":"6","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\browse-page.tsx":"7","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\check-md5.tsx":"8","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\one-source-page.tsx":"9","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\check-source.tsx":"10","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\scan-dir.tsx":"11","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\unscanned.tsx":"12","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\scan-meta.tsx":"13","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\source-meta.tsx":"14","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\Sidebar.tsx":"15","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\ImageStream.tsx":"16","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\GalleryInScroll.tsx":"17","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\my-gallery.tsx":"18","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\MyPhoto.tsx":"19","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\test\\visibility-test.tsx":"20","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\stream-render-gallery.tsx":"21","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\stream-render-simple.tsx":"22","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\stream-page.tsx":"23","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\test\\one-image-test.tsx":"24","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\test\\timeline-test.tsx":"25","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\widgets\\timeline.tsx":"26","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\widgets\\clickable-sparkline-bars.tsx":"27","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\functions.ts":"28","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\widgets\\histogram.tsx":"29"},{"size":232,"mtime":1611940295847,"results":"30","hashOfConfig":"31"},{"size":3084,"mtime":1613074738582,"results":"32","hashOfConfig":"31"},{"size":1074,"mtime":1612132311656,"results":"33","hashOfConfig":"31"},{"size":215,"mtime":1611940295898,"results":"34","hashOfConfig":"31"},{"size":3336,"mtime":1613037787431,"results":"35","hashOfConfig":"31"},{"size":839,"mtime":1613074562903,"results":"36","hashOfConfig":"31"},{"size":1371,"mtime":1612912252858,"results":"37","hashOfConfig":"31"},{"size":3278,"mtime":1612948608109,"results":"38","hashOfConfig":"31"},{"size":2052,"mtime":1612437631617,"results":"39","hashOfConfig":"31"},{"size":1515,"mtime":1612948810317,"results":"40","hashOfConfig":"31"},{"size":3450,"mtime":1612437069290,"results":"41","hashOfConfig":"31"},{"size":2700,"mtime":1612948655590,"results":"42","hashOfConfig":"31"},{"size":1965,"mtime":1612948641826,"results":"43","hashOfConfig":"31"},{"size":1096,"mtime":1612436176938,"results":"44","hashOfConfig":"31"},{"size":2073,"mtime":1613035666916,"results":"45","hashOfConfig":"31"},{"size":3621,"mtime":1613035760971,"results":"46","hashOfConfig":"31"},{"size":3029,"mtime":1613037056401,"results":"47","hashOfConfig":"31"},{"size":3690,"mtime":1613036065484,"results":"48","hashOfConfig":"31"},{"size":3523,"mtime":1613041304435,"results":"49","hashOfConfig":"31"},{"size":1566,"mtime":1612983415696,"results":"50","hashOfConfig":"31"},{"size":359,"mtime":1613034923842,"results":"51","hashOfConfig":"31"},{"size":500,"mtime":1613034716736,"results":"52","hashOfConfig":"31"},{"size":763,"mtime":1613036299673,"results":"53","hashOfConfig":"31"},{"size":3483,"mtime":1613037601969,"results":"54","hashOfConfig":"31"},{"size":1499,"mtime":1613119639621,"results":"55","hashOfConfig":"31"},{"size":3400,"mtime":1613079274666,"results":"56","hashOfConfig":"31"},{"size":1731,"mtime":1613078413862,"results":"57","hashOfConfig":"31"},{"size":188,"mtime":1613077851165,"results":"58","hashOfConfig":"31"},{"size":894,"mtime":1613119370003,"results":"59","hashOfConfig":"31"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},"1pqf0us",{"filePath":"63","messages":"64","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65","usedDeprecatedRules":"62"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"92","usedDeprecatedRules":"62"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"95","usedDeprecatedRules":"62"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"98","usedDeprecatedRules":"62"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"101","usedDeprecatedRules":"62"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"104","usedDeprecatedRules":"62"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"117","messages":"118","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"119","usedDeprecatedRules":"62"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"122","messages":"123","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"124","messages":"125","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\index.tsx",[],["126","127"],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\App.tsx",["128"],"import React from \"react\";\nimport { AppContext, context } from \"./context\";\n// @ts-ignore\nimport axios from \"redaxios\";\n\nimport ScaleLoader from \"react-spinners/ScaleLoader\";\nimport { Sidebar } from \"./stream/Sidebar\";\nimport \"./test.object.assign\";\nimport { Header } from \"./widgets/header\";\nimport \"./app.css\";\nimport { Route, Switch } from \"wouter\";\nimport BrowsePage from \"./browse/browse-page\";\nimport OneSourcePage from \"./browse/one-source-page\";\nimport { QueryClient, QueryClientProvider } from \"react-query\";\nimport { ReactQueryDevtools } from \"react-query/devtools\";\nimport { VisibilityTest } from \"./test/visibility-test\";\nimport StreamPage from \"./stream/stream-page\";\nimport { OneImageTest } from \"./test/one-image-test\";\nimport TimelineTest from \"./test/timeline-test\";\n\ninterface IAppProps {}\n\nexport interface Source {\n\tid: number;\n\tname: string;\n\tpath: string;\n\tthumbRoot: string;\n\tfiles: number;\n\tfolders: number;\n\tmd5: string;\n\t_missingProperties: [];\n}\n\nexport interface IAppState {\n\tstatus?: \"ok\";\n\tmin?: string;\n\tmax?: string;\n\tsources: Source[];\n\tquery?: string;\n\tduration?: number;\n\tsourceID?: number;\n}\n\nconst queryClient = new QueryClient();\n\nexport default class App extends React.Component<IAppProps, IAppState> {\n\tstatic contextType = context;\n\t// @ts-ignore\n\tcontext: AppContext;\n\tbaseUrl: URL | undefined;\n\n\tstate: IAppState = {\n\t\tsources: [],\n\t\tsourceID: undefined,\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.baseUrl = this.context.baseUrl;\n\t\t// noinspection JSIgnoredPromiseFromCall\n\t\tthis.fetchRange();\n\t}\n\n\tasync fetchRange() {\n\t\tconst urlInfo = new URL(\"Info\", this.baseUrl);\n\t\tconst res = await axios.get(urlInfo.toString());\n\t\t// console.log(res.data);\n\t\tconst resData = res.data;\n\t\tif (resData.status !== \"ok\") {\n\t\t\tthrow new Error(resData.error);\n\t\t}\n\t\t// console.log(resData);\n\t\tthis.setState(resData);\n\t}\n\n\tsetSource(id?: number) {\n\t\tconsole.log(\"setSource\", id);\n\t\tthis.setState({ sourceID: id });\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<QueryClientProvider client={queryClient}>\n\t\t\t\t<div className=\"container\" style={{ width: \"100%\", maxWidth: \"100%\" }}>\n\t\t\t\t\t<Header />\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route path=\"/\">\n\t\t\t\t\t\t\t<StreamPage\n\t\t\t\t\t\t\t\tsources={this.state.sources}\n\t\t\t\t\t\t\t\tsourceID={this.state.sourceID}\n\t\t\t\t\t\t\t\tsetSource={this.setSource.bind(this)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Route path=\"/browse\">\n\t\t\t\t\t\t\t{this.state.sources ? (\n\t\t\t\t\t\t\t\t<BrowsePage\n\t\t\t\t\t\t\t\t\tsources={this.state.sources || []}\n\t\t\t\t\t\t\t\t\treloadSources={this.fetchRange.bind(this)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<ScaleLoader />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Route path=\"/browse/:slug\">\n\t\t\t\t\t\t\t{(params) => (\n\t\t\t\t\t\t\t\t<OneSourcePage\n\t\t\t\t\t\t\t\t\tname={params.slug}\n\t\t\t\t\t\t\t\t\tsources={this.state.sources || []}\n\t\t\t\t\t\t\t\t\treloadSources={this.fetchRange.bind(this)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Route path=\"/visibility\" component={VisibilityTest} />\n\t\t\t\t\t\t<Route path=\"/one-image\" component={OneImageTest} />\n\t\t\t\t\t\t<Route path=\"/timeline-test\" component={TimelineTest} />\n\t\t\t\t\t</Switch>\n\t\t\t\t</div>\n\t\t\t\t<ReactQueryDevtools initialIsOpen={true} />\n\t\t\t</QueryClientProvider>\n\t\t);\n\t}\n}\n","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\context.ts",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\test.object.assign.ts",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\model\\Image.ts",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\widgets\\header.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\browse-page.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\check-md5.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\one-source-page.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\check-source.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\scan-dir.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\unscanned.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\scan-meta.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\source-meta.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\Sidebar.tsx",["129","130"],"import React, { FormEvent } from \"react\";\nimport { AppContext, context } from \"../context\";\nimport { Source } from \"../App\";\n\ninterface ISidebarProps {\n\tsources: Source[];\n\tsourceID?: number;\n\tsetSource: (id?: number) => void;\n}\n\ninterface ISidebarState {\n\tminWidth?: number;\n}\n\nexport class Sidebar extends React.Component<ISidebarProps, ISidebarState> {\n\tstatic contextType = context;\n\t// @ts-ignore\n\tcontext: AppContext;\n\n\tstate: ISidebarState = {};\n\n\tconstructor(props: any, context: any) {\n\t\tsuper(props, context);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.postConstruct();\n\t}\n\n\tpostConstruct() {\n\t\tif (this.context) {\n\t\t\tlet minWidth = this.context.sidebar?.minWidth;\n\t\t\tconsole.log(\"setState(minWidth)\", minWidth);\n\t\t\t// this.setState({\n\t\t\t// \tminWidth: minWidth,\n\t\t\t// });\n\t\t\tthis.state.minWidth = minWidth;\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<ul className=\"pb-2\">\n\t\t\t\t\t{this.getSourceLi({ id: undefined, name: \"All\" })}\n\t\t\t\t\t{this.props.sources.map((source: Source) => this.getSourceLi(source))}\n\t\t\t\t</ul>\n\t\t\t\t<form onSubmit={this.onSubmit.bind(this)}>\n\t\t\t\t\t<label htmlFor=\"minWidth\">Min Width</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"u-full-width\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tplaceholder=\"minWidth\"\n\t\t\t\t\t\tid=\"minWidth\"\n\t\t\t\t\t\tname=\"minWidth\"\n\t\t\t\t\t\tdefaultValue={this.state.minWidth}\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\tthis.setState({ minWidth: parseInt(e.target.value) })\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<input className=\"button-primary\" type=\"submit\" value=\"Submit\" />\n\t\t\t\t</form>\n\t\t\t</>\n\t\t);\n\t}\n\n\tprivate getSourceLi(source: { id?: number; name: string }) {\n\t\treturn (\n\t\t\t<li key={source.id}>\n\t\t\t\t<button\n\t\t\t\t\tonClick={(e: React.MouseEvent) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn this.props.setSource(source.id);\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={this.props.sourceID === source.id ? \"active\" : \"\"}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tfontWeight: this.props.sourceID === source.id ? \"bold\" : undefined,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{source.name}\n\t\t\t\t</button>\n\t\t\t</li>\n\t\t);\n\t}\n\n\tonSubmit(e: FormEvent) {\n\t\te.preventDefault();\n\t\tthis.context.setState({\n\t\t\tsidebar: {\n\t\t\t\tminWidth: this.state.minWidth,\n\t\t\t},\n\t\t});\n\t}\n}\n","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\ImageStream.tsx",["131"],"import React from \"react\";\nimport axios from \"redaxios\";\nimport { Image } from \"../model/Image\";\nimport moment from \"moment\";\nimport { AppContext, context } from \"../context\";\nimport StreamRenderGallery from \"./stream-render-gallery\";\nimport StreamRenderSimple from \"./stream-render-simple\";\n\ninterface IAppProps {\n\tsourceID?: number;\n}\n\ninterface IAppState {\n\tstart: Date;\n\titems: Image[];\n\tend?: Date;\n}\n\nexport default class ImageStream extends React.Component<IAppProps, IAppState> {\n\tstate: IAppState = {\n\t\tstart: new Date(),\n\t\titems: [],\n\t\tend: undefined,\n\t};\n\n\tstatic contextType = context;\n\t// @ts-ignore\n\tcontext: AppContext;\n\n\tbaseUrl: URL = new URL(document.location.href);\n\n\tcomponentDidMount() {\n\t\tthis.baseUrl = this.context.baseUrl;\n\t\tif (this.context.lastTopTimestamp) {\n\t\t\t// this.setState({\n\t\t\t// \tend: this.context.lastTopTimestamp,\n\t\t\t// });\n\t\t\tthis.state.end = this.context.lastTopTimestamp;\n\t\t}\n\t\tthis.fetchData().then();\n\t}\n\n\tasync fetchData() {\n\t\tconst images = await this.fetchDataFromFilterServer();\n\t\tthis.appendImages(images);\n\t}\n\n\tasync fetchDataFromFilterServer() {\n\t\tconst urlImages = new URL(process.env.REACT_APP_API + \"Images\");\n\t\tthis.appendSearchParams(urlImages);\n\t\t//console.log(urlImages);\n\t\tconst res = await axios.get(urlImages.toString());\n\t\t// console.log(res.data);\n\t\tconst resData = res.data;\n\t\tif (resData.status !== \"ok\") {\n\t\t\tthrow new Error(resData.error);\n\t\t}\n\n\t\tconst images: Image[] = resData.data.map((el: Image) => new Image(el));\n\t\treturn images;\n\t}\n\n\tappendSearchParams(urlImages: URL) {\n\t\tif (this.props.sourceID) {\n\t\t\turlImages.searchParams.set(\"source\", this.props.sourceID.toString());\n\t\t}\n\t\turlImages.searchParams.set(\n\t\t\t\"since\",\n\t\t\tmoment(this.state.end || this.state.start).format(\"YYYY-MM-DD HH:mm:ss\")\n\t\t);\n\t\tlet minWidth = this.context.sidebar?.minWidth;\n\t\tif (minWidth) {\n\t\t\turlImages.searchParams.set(\"minWidth\", minWidth.toString());\n\t\t}\n\t}\n\n\tappendImages(images: any[]) {\n\t\tif (!images.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst lastImage = images[images.length - 1];\n\t\tconst lastDate = lastImage.getTimestamp();\n\t\t// console.log(lastImage, lastDate);\n\t\tthis.setState(\n\t\t\t({ items }) => {\n\t\t\t\t// append if not id exists\n\t\t\t\timages.map((nnew: Image) => {\n\t\t\t\t\tif (!items.some((el) => el.id === nnew.id)) {\n\t\t\t\t\t\tnnew.baseUrl = this.baseUrl?.toString();\n\t\t\t\t\t\treturn items.push(nnew);\n\t\t\t\t\t}\n\t\t\t\t\treturn \"x\";\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\titems,\n\t\t\t\t\tend: lastDate,\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\t// console.log(this.state.items.map((el: Image) => el.id));\n\t\t\t}\n\t\t);\n\t}\n\n\tget queryParams() {\n\t\tconst url = new URL(document.location.href);\n\t\treturn url.searchParams;\n\t}\n\n\trender() {\n\t\tconsole.log(this.state.items.length);\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"p-2\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackground: \"#33C3F0\",\n\t\t\t\t\t\tposition: \"sticky\",\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tzIndex: 100,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tImages: {this.state.items.length}\n\t\t\t\t</div>\n\t\t\t\t{this.queryParams.has(\"simple\") ? (\n\t\t\t\t\t<StreamRenderSimple\n\t\t\t\t\t\tphotos={this.state.items}\n\t\t\t\t\t\tnext={this.fetchData.bind(this)}\n\t\t\t\t\t\trefresh={this.refresh.bind(this)}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<StreamRenderGallery\n\t\t\t\t\t\tphotos={this.state.items}\n\t\t\t\t\t\tnext={this.fetchData.bind(this)}\n\t\t\t\t\t\trefresh={this.refresh.bind(this)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidUpdate(\n\t\tprevProps: Readonly<IAppProps>,\n\t\tnextState: Readonly<IAppState>,\n\t\tnextContext: any\n\t): boolean {\n\t\tconst yes = this.props.sourceID !== prevProps.sourceID;\n\t\tif (yes) {\n\t\t\tthis.setState({ items: [], start: new Date(), end: undefined }, () =>\n\t\t\t\tthis.fetchData().then()\n\t\t\t);\n\t\t}\n\t\treturn yes;\n\t}\n\n\trefresh() {\n\t\tconsole.log(\"refresh\");\n\t}\n}\n","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\GalleryInScroll.tsx",["132"],"import { Image } from \"../model/Image\";\nimport React from \"react\";\nimport Carousel, { Modal, ModalGateway } from \"react-images\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { AppContext, context } from \"../context\";\nimport { MyGallery } from \"./my-gallery\";\nimport ScaleLoader from \"react-spinners/ScaleLoader\";\nimport { PhotoProps } from \"react-photo-gallery\";\n\nexport interface PhotoSetItem extends PhotoProps {\n\tkey?: string;\n\tsrc: string;\n\twidth: number;\n\theight: number;\n\timage?: Image;\n}\n\ninterface IGalleryInScrollProps {\n\tphotos: Image[];\n\tnext: any;\n\trefreshFunction: () => void;\n}\n\nexport class GalleryInScroll extends React.Component<\n\tIGalleryInScrollProps,\n\t{\n\t\tcurrentImage?: number;\n\t\tviewerIsOpen: boolean;\n\t}\n> {\n\tstatic contextType = context;\n\t// @ts-ignore\n\tcontext: AppContext;\n\n\tstate = {\n\t\tcurrentImage: 0,\n\t\tviewerIsOpen: false,\n\t};\n\n\tcomponentDidMount() {\n\t\t// console.log(\n\t\t// \tthis.props.photos.map(\n\t\t// \t\t(p: Image) => p.path + \" [\" + p.getWidth() + \"x\" + p.getHeight() + \"]\"\n\t\t// \t)\n\t\t// );\n\t}\n\n\tphotoItems(): PhotoSetItem[] {\n\t\tconst photoSet = this.props.photos.map((img: Image) => {\n\t\t\t// console.log(img);\n\t\t\treturn {\n\t\t\t\tsrc: img.thumbURL,\n\t\t\t\twidth: img.getWidth(),\n\t\t\t\theight: img.getHeight(),\n\t\t\t\timage: img,\n\t\t\t} as PhotoSetItem;\n\t\t});\n\t\t//console.log(photoSet.map(el => el.src + ' [' + el.width + 'x' + el.height + ']'));\n\t\treturn photoSet;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<InfiniteScroll\n\t\t\t\t\tdataLength={this.photoItems().length} //This is important field to render the next data\n\t\t\t\t\tnext={this.props.next}\n\t\t\t\t\thasMore={true}\n\t\t\t\t\thasChildren={false}\n\t\t\t\t\tloader={() => null}\n\t\t\t\t\t/*<h4 style={{ minHeight: 30 }}>*/\n\t\t\t\t\t/*\t<ScaleLoader loading={true} color=\"#4DAF7C\" /> Loading...*/\n\t\t\t\t\t/*</h4>*/\n\t\t\t\t\t/*}*/\n\t\t\t\t\tendMessage={\n\t\t\t\t\t\t<p style={{ textAlign: \"center\" }}>\n\t\t\t\t\t\t\t<b>Yay! You have seen it all</b>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t}\n\t\t\t\t\t// below props only if you need pull down functionality\n\t\t\t\t\trefreshFunction={this.props.refreshFunction}\n\t\t\t\t\tpullDownToRefresh\n\t\t\t\t\tpullDownToRefreshContent={\n\t\t\t\t\t\t<h3 style={{ textAlign: \"center\" }}>\n\t\t\t\t\t\t\t&#8595; Pull down to refresh\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t}\n\t\t\t\t\treleaseToRefreshContent={\n\t\t\t\t\t\t<h3 style={{ textAlign: \"center\" }}>&#8593; Release to refresh</h3>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<MyGallery\n\t\t\t\t\t\tphotos={this.photoItems()}\n\t\t\t\t\t\topenLightbox={this.openLightbox.bind(this)}\n\t\t\t\t\t/>\n\t\t\t\t</InfiniteScroll>\n\n\t\t\t\t<ModalGateway>\n\t\t\t\t\t{this.state.viewerIsOpen ? (\n\t\t\t\t\t\t<Modal onClose={this.closeLightbox.bind(this)}>\n\t\t\t\t\t\t\t<Carousel\n\t\t\t\t\t\t\t\tcurrentIndex={this.state.currentImage}\n\t\t\t\t\t\t\t\tviews={this.props.photos.map((x: Image) => ({\n\t\t\t\t\t\t\t\t\t...x,\n\t\t\t\t\t\t\t\t\tsource: {\n\t\t\t\t\t\t\t\t\t\tthumbnail: x.thumbURL,\n\t\t\t\t\t\t\t\t\t\tregular: x.originalURL,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tcaption: x.title,\n\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Modal>\n\t\t\t\t\t) : null}\n\t\t\t\t</ModalGateway>\n\t\t\t</div>\n\t\t);\n\t}\n\n\topenLightbox(index: number) {\n\t\tconsole.log(\"image\", index);\n\t\tthis.setState({\n\t\t\tcurrentImage: index,\n\t\t\tviewerIsOpen: true,\n\t\t});\n\t}\n\n\tcloseLightbox() {\n\t\tthis.setState({\n\t\t\tviewerIsOpen: false,\n\t\t});\n\t}\n}\n","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\my-gallery.tsx",["133"],"import React from \"react\";\nimport Gallery, { PhotoProps, RenderImageProps } from \"react-photo-gallery\";\nimport { MyPhoto } from \"./MyPhoto\";\n// @ts-ignore\nimport IntersectionVisible from \"react-intersection-visible\";\nimport { Image } from \"../model/Image\";\nimport { PhotoSetItem } from \"./GalleryInScroll\";\nimport TrackVisibility from \"react-on-screen\";\nconst VisibilitySensor = require(\"react-visibility-sensor\");\n\n/**\n * @deprecated temporary not used\n * @param props\n */\nclass ImageRenderIntersection extends React.Component<\n\tRenderImageProps<PhotoProps<PhotoSetItem>>\n> {\n\trender() {\n\t\treturn (\n\t\t\t<IntersectionVisible\n\t\t\t\tkey={this.props.photo.key}\n\t\t\t\t// onIntersect={ e => this.onIntersect( e ) }\n\t\t\t\tonHide={(e: any) =>\n\t\t\t\t\tthis.props.photo.image && this.onImageHide(e, this.props.photo.image)\n\t\t\t\t}\n\t\t\t\tonShow={(e: any) =>\n\t\t\t\t\tthis.props.photo.image && this.onImageShow(e, this.props.photo.image)\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<MyPhoto\n\t\t\t\t\tkey={this.props.photo.key}\n\t\t\t\t\tindex={this.props.index}\n\t\t\t\t\tdirection={this.props.direction}\n\t\t\t\t\tleft={this.props.left}\n\t\t\t\t\ttop={this.props.top}\n\t\t\t\t\tphoto={this.props.photo}\n\t\t\t\t\tonClick={(index: any) => {\n\t\t\t\t\t\tconsole.log(\"click\", index);\n\t\t\t\t\t\t// this.props.openLightbox(this.props.index);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</IntersectionVisible>\n\t\t);\n\t}\n\n\tprivate onImageShow(e: IntersectionObserverEntry, image: Image) {\n\t\t// console.log('show', e);\n\t\t// this.context.setState({\n\t\t// \t[AppContext.VIEWPORT_TIMESTAMP]: image.date,\n\t\t// });\n\t}\n\n\tprivate onImageHide(e: IntersectionObserverEntry, image: Image) {\n\t\t// console.log('hide', e);\n\t}\n}\n\ninterface Props {\n\tphotos: PhotoSetItem[];\n\topenLightbox: (index: number) => void;\n}\n\nexport class MyGallery extends React.Component<Props, any> {\n\timageRender(props: RenderImageProps<PhotoProps<PhotoSetItem>>) {\n\t\treturn (\n\t\t\t<MyPhoto\n\t\t\t\tindex={props.index}\n\t\t\t\tphoto={props.photo}\n\t\t\t\tdirection={props.direction}\n\t\t\t\tleft={props.left}\n\t\t\t\ttop={props.top}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tthis.props.openLightbox(props.index);\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\t}\n\n\timageRenderVisibilitySensor(\n\t\tprops: RenderImageProps<PhotoProps<PhotoSetItem>>\n\t) {\n\t\treturn (\n\t\t\t<VisibilitySensor>\n\t\t\t\t{({ isVisible }: { isVisible: boolean }) =>\n\t\t\t\t\tisVisible ? (\n\t\t\t\t\t\t<MyPhoto\n\t\t\t\t\t\t\tindex={props.index}\n\t\t\t\t\t\t\tphoto={props.photo}\n\t\t\t\t\t\t\tdirection={props.direction}\n\t\t\t\t\t\t\tleft={props.left}\n\t\t\t\t\t\t\ttop={props.top}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.props.openLightbox(props.index);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{ width: props.photo.width, height: props.photo.height }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</VisibilitySensor>\n\t\t);\n\t}\n\n\timageRenderOnScreen(props: RenderImageProps<PhotoProps<PhotoSetItem>>) {\n\t\treturn (\n\t\t\t<TrackVisibility partialVisibility={true} key={props.photo.key}>\n\t\t\t\t{({ isVisible }: { isVisible: boolean }) =>\n\t\t\t\t\tisVisible ? (\n\t\t\t\t\t\t<MyPhoto\n\t\t\t\t\t\t\tkey={props.photo.key}\n\t\t\t\t\t\t\tindex={props.index}\n\t\t\t\t\t\t\tphoto={props.photo}\n\t\t\t\t\t\t\tdirection={props.direction}\n\t\t\t\t\t\t\tleft={props.left}\n\t\t\t\t\t\t\ttop={props.top}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.props.openLightbox(props.index);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{ width: props.photo.width, height: props.photo.height }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</TrackVisibility>\n\t\t);\n\t}\n\n\trender() {\n\t\t// @ts-ignore\n\t\treturn (\n\t\t\t<Gallery\n\t\t\t\tdirection=\"row\"\n\t\t\t\tcolumns={4}\n\t\t\t\ttargetRowHeight={256}\n\t\t\t\tmargin={5}\n\t\t\t\tphotos={this.props.photos}\n\t\t\t\trenderImage={this.imageRender.bind(this)}\n\t\t\t\t// renderImage={this.imageRenderVisibilitySensor.bind(this)}\n\t\t\t\t// renderImage={this.imageRenderOnScreen.bind(this)}\n\t\t\t\t// renderImage={(props: RenderImageProps<any>) => (\n\t\t\t\t// \t<ImageRenderIntersection {...props} />\n\t\t\t\t// )}\n\t\t\t/>\n\t\t);\n\t}\n}\n","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\MyPhoto.tsx",["134"],"import React from \"react\";\nimport { PhotoProps, RenderImageProps } from \"react-photo-gallery\";\nimport moment from \"moment\";\nimport { PhotoSetItem } from \"./GalleryInScroll\";\n// @ts-ignore\nimport ReactHoverObserver from \"react-hover-observer\";\n\ninterface Props {\n\tindex: number;\n\tdirection?: \"row\" | \"column\";\n\tleft?: number;\n\ttop?: number;\n\tphoto: PhotoProps<PhotoSetItem>;\n\tonClick: (e: React.MouseEvent, photo: PhotoProps, index: number) => void;\n\tforceInfo?: boolean;\n}\n\ninterface MyPhotoState {\n\tshowOverlay: boolean;\n\tmouseX?: number;\n\tmouseY?: number;\n}\n\nexport class MyPhoto extends React.Component<Props, MyPhotoState> {\n\tmargin = 2;\n\tref = React.createRef<HTMLDivElement>();\n\tbounds?: ClientRect & { x: number; y: number };\n\tstate: MyPhotoState = {\n\t\tshowOverlay: false,\n\t};\n\n\trender() {\n\t\t//console.log(this.props);\n\t\tlet cont: any = {\n\t\t\tmargin: this.margin,\n\t\t\tposition: \"relative\",\n\t\t\twidth: this.props.photo.width,\n\t\t\theight: this.props.photo.height,\n\t\t};\n\t\tif (this.props.direction === \"column\") {\n\t\t\tcont.position = \"absolute\";\n\t\t\tcont.left = this.props.left;\n\t\t\tcont.top = this.props.top;\n\t\t}\n\t\treturn (\n\t\t\t<ReactHoverObserver>\n\t\t\t\t{({ isHovering }: { isHovering: boolean }) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\t// key={this.props.key}\n\t\t\t\t\t\tstyle={{ ...cont }}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t\tthis.props.onClick\n\t\t\t\t\t\t\t\t? this.props.onClick(e, this.props.photo, this.props.index)\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tref={this.ref}\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={this.props.photo.src}\n\t\t\t\t\t\t\twidth={this.props.photo.width}\n\t\t\t\t\t\t\theight={this.props.photo.height}\n\t\t\t\t\t\t\t// onMouseEnter={this.showOverlay.bind(this)}\n\t\t\t\t\t\t\t// onMouseOut={this.hideOverlay.bind(this)}\n\t\t\t\t\t\t\talt={this.props.photo.src}\n\t\t\t\t\t\t\ttitle={\n\t\t\t\t\t\t\t\tthis.props.photo.image?.getWidth() +\n\t\t\t\t\t\t\t\t\"x\" +\n\t\t\t\t\t\t\t\tthis.props.photo.image?.getHeight()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{(this.state.showOverlay || this.props.forceInfo || isHovering) && (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\t\t\tcolor: \"white\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackground: \"black\",\n\t\t\t\t\t\t\t\t\t\topacity: 0.5,\n\t\t\t\t\t\t\t\t\t\tpadding: \"0.5em\",\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div>Name: {this.props.photo.image?.basename}</div>\n\t\t\t\t\t\t\t\t\t<div>Path: {this.props.photo.image?.pathEnd}</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\tSize:{\" \"}\n\t\t\t\t\t\t\t\t\t\t{this.props.photo.image?.getWidth() +\n\t\t\t\t\t\t\t\t\t\t\t\"x\" +\n\t\t\t\t\t\t\t\t\t\t\tthis.props.photo.image?.getHeight()}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\tDate:{\" \"}\n\t\t\t\t\t\t\t\t\t\t{moment(this.props.photo.image?.getTimestamp()).format(\n\t\t\t\t\t\t\t\t\t\t\t\"YYYY-MM-DD HH:mm:ss\"\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</ReactHoverObserver>\n\t\t);\n\t}\n\n\t/**\n\t * @deprecated\n\t */\n\tshowOverlay() {\n\t\tthis.setState({\n\t\t\tshowOverlay: true,\n\t\t});\n\t}\n\n\t/**\n\t * @deprecated\n\t */\n\thideOverlay(e: React.MouseEvent) {\n\t\tthis.bounds = this.ref?.current?.getBoundingClientRect();\n\t\tthis.setState({\n\t\t\tmouseX: e.pageX,\n\t\t\tmouseY: e.pageY,\n\t\t});\n\t\t// e.pageX += window.pageXOffset;\n\t\t// e.pageY += window.pageYOffset;\n\t\t// console.log(e.pageX, e.pageY, this.bounds);\n\t\tif (this.bounds) {\n\t\t\tconst insideX = this.bounds.left < e.pageX && e.pageX < this.bounds.right;\n\t\t\tconst insideY = this.bounds.top < e.pageY && e.pageY < this.bounds.bottom;\n\t\t\tconsole.log(\n\t\t\t\tinsideX,\n\t\t\t\tinsideY,\n\t\t\t\tthis.bounds.top,\n\t\t\t\t\"<\",\n\t\t\t\te.pageY,\n\t\t\t\t\"<\",\n\t\t\t\tthis.bounds.bottom\n\t\t\t);\n\t\t\tif (!insideX || !insideY) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tshowOverlay: false,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\test\\visibility-test.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\stream-render-gallery.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\stream-render-simple.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\stream\\stream-page.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\test\\one-image-test.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\test\\timeline-test.tsx",["135"],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\widgets\\timeline.tsx",["136","137"],"import React, { ChangeEvent, useState } from \"react\";\n// @ts-ignore\nimport { Sparklines, SparklinesBars } from \"react-sparklines\";\nimport ClickableSparklineBars from \"./clickable-sparkline-bars\";\nimport { ymd } from \"../functions\";\nimport moment from \"moment\";\n\nexport default function Timeline(props: {\n\tdailyImages: number[];\n\tminDate: Date;\n\tmaxDate: Date;\n\tonChange: (date: Date) => void;\n}) {\n\tif (!Object.keys(props).length) {\n\t\tprops = {\n\t\t\t...props,\n\t\t};\n\t}\n\tconst [date, setDateState] = useState(props.minDate);\n\n\tconst setDate = (copy: Date) => {\n\t\tif (copy.getTime() > props.maxDate.getTime()) {\n\t\t\tcopy = new Date(props.maxDate);\n\t\t}\n\t\tsetDateState(copy);\n\t\tprops.onChange(copy);\n\t};\n\n\tconst changeYear = (year: number) => {\n\t\tlet copy = new Date(date);\n\t\tcopy?.setFullYear(year);\n\t\tsetDate(copy);\n\t};\n\n\tconst changeMonth = (month: number) => {\n\t\tlet copy = new Date(date);\n\t\tcopy?.setMonth(month - 1);\n\t\tsetDate(copy);\n\t};\n\n\tconst changeDay = (day: number) => {\n\t\tlet copy = new Date(date);\n\t\tcopy?.setDate(day);\n\t\tsetDate(copy);\n\t};\n\n\tconst setDayOfYear = (day: number) => {\n\t\tconst move = moment(date).dayOfYear(day);\n\t\tsetDate(move.toDate());\n\t};\n\n\tconsole.log(date);\n\tconst minMonth =\n\t\tdate.getFullYear() === props.minDate.getFullYear()\n\t\t\t? props.minDate.getMonth() + 1\n\t\t\t: 1;\n\tconst maxMonth =\n\t\tdate.getFullYear() === props.maxDate.getFullYear()\n\t\t\t? props.maxDate.getMonth() + 1\n\t\t\t: 12;\n\tconst minDay =\n\t\tdate.getFullYear() === props.minDate.getFullYear() &&\n\t\tdate.getMonth() === props.minDate.getMonth()\n\t\t\t? props.minDate.getDate()\n\t\t\t: 1;\n\tconst maxDay =\n\t\tdate.getFullYear() === props.maxDate.getFullYear() &&\n\t\tdate.getMonth() === props.maxDate.getMonth()\n\t\t\t? props.maxDate.getDate()\n\t\t\t: moment(new Date(date.getFullYear(), date.getMonth())).daysInMonth();\n\n\tconst mom = moment(date);\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"year\">\n\t\t\t\t<TimelineFor\n\t\t\t\t\tmin={props.minDate.getFullYear()}\n\t\t\t\t\tvalue={date.getFullYear()}\n\t\t\t\t\tmax={props.maxDate?.getFullYear()}\n\t\t\t\t\tonChange={changeYear}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"month\">\n\t\t\t\t<TimelineFor\n\t\t\t\t\tmin={minMonth}\n\t\t\t\t\tvalue={date.getMonth() + 1}\n\t\t\t\t\tmax={maxMonth}\n\t\t\t\t\tonChange={changeMonth}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"day\">\n\t\t\t\t<TimelineFor\n\t\t\t\t\tmin={minDay}\n\t\t\t\t\tvalue={date.getDate()}\n\t\t\t\t\tmax={maxDay}\n\t\t\t\t\tonChange={changeDay}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<Sparklines data={props.dailyImages}>\n\t\t\t\t<ClickableSparklineBars\n\t\t\t\t\theight={100}\n\t\t\t\t\tstyle={{ fill: \"#41c3f9\" }}\n\t\t\t\t\tcalcStyle={(i) => ({\n\t\t\t\t\t\tfill: i === mom.dayOfYear() ? \"#a1d300\" : \"#41c3f9\",\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={(m, i) => setDayOfYear(i)}\n\t\t\t\t\tmargin={0}\n\t\t\t\t/>\n\t\t\t</Sparklines>\n\t\t\t<div className=\"flex flex-row justify-between\">\n\t\t\t\t<div>{ymd(props.minDate)}</div>\n\t\t\t\t<div>{ymd(date)}</div>\n\t\t\t\t<div>{ymd(props.maxDate)}</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction TimelineFor(props: {\n\tmin: number;\n\tvalue: number;\n\tmax: number;\n\tonChange: (i: number) => void;\n}) {\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"flex flex-row w-full justify-between\">\n\t\t\t\t<span>{props.min}</span>\n\t\t\t\t<span>{props.value}</span>\n\t\t\t\t<span>{props.max}</span>\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\ttype=\"range\"\n\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\tmin={props.min}\n\t\t\t\tvalue={props.value}\n\t\t\t\tmax={props.max}\n\t\t\t\tonChange={(el) => {\n\t\t\t\t\tconst year = (el.target as HTMLInputElement).value;\n\t\t\t\t\t// console.log(year);\n\t\t\t\t\tprops.onChange(parseInt(year, 10));\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\widgets\\clickable-sparkline-bars.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\functions.ts",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\widgets\\histogram.tsx",["138","139"],{"ruleId":"140","replacedBy":"141"},{"ruleId":"142","replacedBy":"143"},{"ruleId":"144","severity":1,"message":"145","line":7,"column":10,"nodeType":"146","messageId":"147","endLine":7,"endColumn":17},{"ruleId":"148","severity":1,"message":"149","line":22,"column":2,"nodeType":"150","messageId":"151","endLine":24,"endColumn":3},{"ruleId":"152","severity":1,"message":"153","line":37,"column":4,"nodeType":"154","endLine":37,"endColumn":14},{"ruleId":"152","severity":1,"message":"153","line":38,"column":4,"nodeType":"154","endLine":38,"endColumn":14},{"ruleId":"144","severity":1,"message":"155","line":7,"column":8,"nodeType":"146","messageId":"147","endLine":7,"endColumn":19},{"ruleId":"144","severity":1,"message":"156","line":15,"column":7,"nodeType":"146","messageId":"147","endLine":15,"endColumn":30},{"ruleId":"144","severity":1,"message":"157","line":2,"column":22,"nodeType":"146","messageId":"147","endLine":2,"endColumn":38},{"ruleId":"144","severity":1,"message":"158","line":7,"column":10,"nodeType":"146","messageId":"147","endLine":7,"endColumn":33},{"ruleId":"144","severity":1,"message":"159","line":1,"column":17,"nodeType":"146","messageId":"147","endLine":1,"endColumn":28},{"ruleId":"144","severity":1,"message":"160","line":3,"column":22,"nodeType":"146","messageId":"147","endLine":3,"endColumn":36},{"ruleId":"144","severity":1,"message":"161","line":1,"column":17,"nodeType":"146","messageId":"147","endLine":1,"endColumn":25},{"ruleId":"144","severity":1,"message":"162","line":16,"column":3,"nodeType":"146","messageId":"147","endLine":16,"endColumn":10},"no-native-reassign",["163"],"no-negated-in-lhs",["164"],"@typescript-eslint/no-unused-vars","'Sidebar' is defined but never used.","Identifier","unusedVar","@typescript-eslint/no-useless-constructor","Useless constructor.","MethodDefinition","noUselessConstructor","react/no-direct-mutation-state","Do not mutate state directly. Use setState().","MemberExpression","'ScaleLoader' is defined but never used.","'ImageRenderIntersection' is defined but never used.","'RenderImageProps' is defined but never used.","'generateRandomHistogram' is defined but never used.","'ChangeEvent' is defined but never used.","'SparklinesBars' is defined but never used.","'useState' is defined but never used.","'refetch' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]