[{"/Users/depidsvy/dev/pinacotheque/src/index.tsx":"1","/Users/depidsvy/dev/pinacotheque/src/App.tsx":"2","/Users/depidsvy/dev/pinacotheque/src/context.ts":"3","/Users/depidsvy/dev/pinacotheque/src/test.object.assign.ts":"4","/Users/depidsvy/dev/pinacotheque/src/widgets/header.tsx":"5","/Users/depidsvy/dev/pinacotheque/src/browse/browse-page.tsx":"6","/Users/depidsvy/dev/pinacotheque/src/browse/one-source-page.tsx":"7","/Users/depidsvy/dev/pinacotheque/src/test/one-image-test.tsx":"8","/Users/depidsvy/dev/pinacotheque/src/test/visibility-test.tsx":"9","/Users/depidsvy/dev/pinacotheque/src/test/timeline-test.tsx":"10","/Users/depidsvy/dev/pinacotheque/src/stream/stream-page.tsx":"11","/Users/depidsvy/dev/pinacotheque/src/browse/check-source.tsx":"12","/Users/depidsvy/dev/pinacotheque/src/browse/unscanned.tsx":"13","/Users/depidsvy/dev/pinacotheque/src/browse/scan-dir.tsx":"14","/Users/depidsvy/dev/pinacotheque/src/browse/source-meta.tsx":"15","/Users/depidsvy/dev/pinacotheque/src/model/Image.ts":"16","/Users/depidsvy/dev/pinacotheque/src/browse/check-md5.tsx":"17","/Users/depidsvy/dev/pinacotheque/src/stream/MyPhoto.tsx":"18","/Users/depidsvy/dev/pinacotheque/src/widgets/timeline.tsx":"19","/Users/depidsvy/dev/pinacotheque/src/stream/Sidebar.tsx":"20","/Users/depidsvy/dev/pinacotheque/src/stream/ImageStream.tsx":"21","/Users/depidsvy/dev/pinacotheque/src/browse/scan-meta.tsx":"22","/Users/depidsvy/dev/pinacotheque/src/functions.ts":"23","/Users/depidsvy/dev/pinacotheque/src/widgets/clickable-sparkline-bars.tsx":"24","/Users/depidsvy/dev/pinacotheque/src/stream/stream-render-simple.tsx":"25","/Users/depidsvy/dev/pinacotheque/src/stream/stream-render-gallery.tsx":"26","/Users/depidsvy/dev/pinacotheque/src/stream/GalleryInScroll.tsx":"27","/Users/depidsvy/dev/pinacotheque/src/stream/my-gallery.tsx":"28","/Users/depidsvy/dev/pinacotheque/src/folders/folders-page.tsx":"29"},{"size":225,"mtime":1588973607790,"results":"30","hashOfConfig":"31"},{"size":3394,"mtime":1613253735579,"results":"32","hashOfConfig":"31"},{"size":1074,"mtime":1613251391817,"results":"33","hashOfConfig":"31"},{"size":202,"mtime":1589829656561,"results":"34","hashOfConfig":"31"},{"size":954,"mtime":1613252847725,"results":"35","hashOfConfig":"31"},{"size":1371,"mtime":1613251391813,"results":"36","hashOfConfig":"31"},{"size":2052,"mtime":1613251391814,"results":"37","hashOfConfig":"31"},{"size":3483,"mtime":1613251391828,"results":"38","hashOfConfig":"31"},{"size":1566,"mtime":1613251391829,"results":"39","hashOfConfig":"31"},{"size":983,"mtime":1613251391829,"results":"40","hashOfConfig":"31"},{"size":763,"mtime":1613251391827,"results":"41","hashOfConfig":"31"},{"size":1515,"mtime":1613251391814,"results":"42","hashOfConfig":"31"},{"size":2700,"mtime":1613251391816,"results":"43","hashOfConfig":"31"},{"size":3450,"mtime":1613251391814,"results":"44","hashOfConfig":"31"},{"size":1096,"mtime":1613251391815,"results":"45","hashOfConfig":"31"},{"size":3336,"mtime":1613251391820,"results":"46","hashOfConfig":"31"},{"size":3278,"mtime":1613251391813,"results":"47","hashOfConfig":"31"},{"size":3523,"mtime":1613251391824,"results":"48","hashOfConfig":"31"},{"size":3400,"mtime":1613251391832,"results":"49","hashOfConfig":"31"},{"size":2073,"mtime":1613251391825,"results":"50","hashOfConfig":"31"},{"size":3621,"mtime":1613251391824,"results":"51","hashOfConfig":"31"},{"size":1965,"mtime":1613251391815,"results":"52","hashOfConfig":"31"},{"size":188,"mtime":1613251391818,"results":"53","hashOfConfig":"31"},{"size":1731,"mtime":1613251391831,"results":"54","hashOfConfig":"31"},{"size":500,"mtime":1613251391828,"results":"55","hashOfConfig":"31"},{"size":359,"mtime":1613251391827,"results":"56","hashOfConfig":"31"},{"size":3029,"mtime":1613251391823,"results":"57","hashOfConfig":"31"},{"size":3690,"mtime":1613251391826,"results":"58","hashOfConfig":"31"},{"size":517,"mtime":1613253761784,"results":"59","hashOfConfig":"31"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},"1cnbzck",{"filePath":"63","messages":"64","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"97","usedDeprecatedRules":"62"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"100","usedDeprecatedRules":"62"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"103","usedDeprecatedRules":"62"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"106","usedDeprecatedRules":"62"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"121","usedDeprecatedRules":"62"},{"filePath":"122","messages":"123","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/depidsvy/dev/pinacotheque/src/index.tsx",[],["124","125"],"/Users/depidsvy/dev/pinacotheque/src/App.tsx",["126"],"/Users/depidsvy/dev/pinacotheque/src/context.ts",[],"/Users/depidsvy/dev/pinacotheque/src/test.object.assign.ts",[],"/Users/depidsvy/dev/pinacotheque/src/widgets/header.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/browse/browse-page.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/browse/one-source-page.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/test/one-image-test.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/test/visibility-test.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/test/timeline-test.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/stream/stream-page.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/browse/check-source.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/browse/unscanned.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/browse/scan-dir.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/browse/source-meta.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/model/Image.ts",[],"/Users/depidsvy/dev/pinacotheque/src/browse/check-md5.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/stream/MyPhoto.tsx",["127"],"import React from \"react\";\nimport { PhotoProps, RenderImageProps } from \"react-photo-gallery\";\nimport moment from \"moment\";\nimport { PhotoSetItem } from \"./GalleryInScroll\";\n// @ts-ignore\nimport ReactHoverObserver from \"react-hover-observer\";\n\ninterface Props {\n\tindex: number;\n\tdirection?: \"row\" | \"column\";\n\tleft?: number;\n\ttop?: number;\n\tphoto: PhotoProps<PhotoSetItem>;\n\tonClick: (e: React.MouseEvent, photo: PhotoProps, index: number) => void;\n\tforceInfo?: boolean;\n}\n\ninterface MyPhotoState {\n\tshowOverlay: boolean;\n\tmouseX?: number;\n\tmouseY?: number;\n}\n\nexport class MyPhoto extends React.Component<Props, MyPhotoState> {\n\tmargin = 2;\n\tref = React.createRef<HTMLDivElement>();\n\tbounds?: ClientRect & { x: number; y: number };\n\tstate: MyPhotoState = {\n\t\tshowOverlay: false,\n\t};\n\n\trender() {\n\t\t//console.log(this.props);\n\t\tlet cont: any = {\n\t\t\tmargin: this.margin,\n\t\t\tposition: \"relative\",\n\t\t\twidth: this.props.photo.width,\n\t\t\theight: this.props.photo.height,\n\t\t};\n\t\tif (this.props.direction === \"column\") {\n\t\t\tcont.position = \"absolute\";\n\t\t\tcont.left = this.props.left;\n\t\t\tcont.top = this.props.top;\n\t\t}\n\t\treturn (\n\t\t\t<ReactHoverObserver>\n\t\t\t\t{({ isHovering }: { isHovering: boolean }) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\t// key={this.props.key}\n\t\t\t\t\t\tstyle={{ ...cont }}\n\t\t\t\t\t\tonClick={(e) =>\n\t\t\t\t\t\t\tthis.props.onClick\n\t\t\t\t\t\t\t\t? this.props.onClick(e, this.props.photo, this.props.index)\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tref={this.ref}\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={this.props.photo.src}\n\t\t\t\t\t\t\twidth={this.props.photo.width}\n\t\t\t\t\t\t\theight={this.props.photo.height}\n\t\t\t\t\t\t\t// onMouseEnter={this.showOverlay.bind(this)}\n\t\t\t\t\t\t\t// onMouseOut={this.hideOverlay.bind(this)}\n\t\t\t\t\t\t\talt={this.props.photo.src}\n\t\t\t\t\t\t\ttitle={\n\t\t\t\t\t\t\t\tthis.props.photo.image?.getWidth() +\n\t\t\t\t\t\t\t\t\"x\" +\n\t\t\t\t\t\t\t\tthis.props.photo.image?.getHeight()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{(this.state.showOverlay || this.props.forceInfo || isHovering) && (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\t\t\tcolor: \"white\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackground: \"black\",\n\t\t\t\t\t\t\t\t\t\topacity: 0.5,\n\t\t\t\t\t\t\t\t\t\tpadding: \"0.5em\",\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div>Name: {this.props.photo.image?.basename}</div>\n\t\t\t\t\t\t\t\t\t<div>Path: {this.props.photo.image?.pathEnd}</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\tSize:{\" \"}\n\t\t\t\t\t\t\t\t\t\t{this.props.photo.image?.getWidth() +\n\t\t\t\t\t\t\t\t\t\t\t\"x\" +\n\t\t\t\t\t\t\t\t\t\t\tthis.props.photo.image?.getHeight()}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\tDate:{\" \"}\n\t\t\t\t\t\t\t\t\t\t{moment(this.props.photo.image?.getTimestamp()).format(\n\t\t\t\t\t\t\t\t\t\t\t\"YYYY-MM-DD HH:mm:ss\"\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</ReactHoverObserver>\n\t\t);\n\t}\n\n\t/**\n\t * @deprecated\n\t */\n\tshowOverlay() {\n\t\tthis.setState({\n\t\t\tshowOverlay: true,\n\t\t});\n\t}\n\n\t/**\n\t * @deprecated\n\t */\n\thideOverlay(e: React.MouseEvent) {\n\t\tthis.bounds = this.ref?.current?.getBoundingClientRect();\n\t\tthis.setState({\n\t\t\tmouseX: e.pageX,\n\t\t\tmouseY: e.pageY,\n\t\t});\n\t\t// e.pageX += window.pageXOffset;\n\t\t// e.pageY += window.pageYOffset;\n\t\t// console.log(e.pageX, e.pageY, this.bounds);\n\t\tif (this.bounds) {\n\t\t\tconst insideX = this.bounds.left < e.pageX && e.pageX < this.bounds.right;\n\t\t\tconst insideY = this.bounds.top < e.pageY && e.pageY < this.bounds.bottom;\n\t\t\tconsole.log(\n\t\t\t\tinsideX,\n\t\t\t\tinsideY,\n\t\t\t\tthis.bounds.top,\n\t\t\t\t\"<\",\n\t\t\t\te.pageY,\n\t\t\t\t\"<\",\n\t\t\t\tthis.bounds.bottom\n\t\t\t);\n\t\t\tif (!insideX || !insideY) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tshowOverlay: false,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n","/Users/depidsvy/dev/pinacotheque/src/widgets/timeline.tsx",["128","129"],"import React, { ChangeEvent, useState } from \"react\";\n// @ts-ignore\nimport { Sparklines, SparklinesBars } from \"react-sparklines\";\nimport ClickableSparklineBars from \"./clickable-sparkline-bars\";\nimport { ymd } from \"../functions\";\nimport moment from \"moment\";\n\nexport default function Timeline(props: {\n\tdailyImages: number[];\n\tminDate: Date;\n\tmaxDate: Date;\n\tonChange: (date: Date) => void;\n}) {\n\tif (!Object.keys(props).length) {\n\t\tprops = {\n\t\t\t...props,\n\t\t};\n\t}\n\tconst [date, setDateState] = useState(props.minDate);\n\n\tconst setDate = (copy: Date) => {\n\t\tif (copy.getTime() > props.maxDate.getTime()) {\n\t\t\tcopy = new Date(props.maxDate);\n\t\t}\n\t\tsetDateState(copy);\n\t\tprops.onChange(copy);\n\t};\n\n\tconst changeYear = (year: number) => {\n\t\tlet copy = new Date(date);\n\t\tcopy?.setFullYear(year);\n\t\tsetDate(copy);\n\t};\n\n\tconst changeMonth = (month: number) => {\n\t\tlet copy = new Date(date);\n\t\tcopy?.setMonth(month - 1);\n\t\tsetDate(copy);\n\t};\n\n\tconst changeDay = (day: number) => {\n\t\tlet copy = new Date(date);\n\t\tcopy?.setDate(day);\n\t\tsetDate(copy);\n\t};\n\n\tconst setDayOfYear = (day: number) => {\n\t\tconst move = moment(date).dayOfYear(day);\n\t\tsetDate(move.toDate());\n\t};\n\n\tconsole.log(date);\n\tconst minMonth =\n\t\tdate.getFullYear() === props.minDate.getFullYear()\n\t\t\t? props.minDate.getMonth() + 1\n\t\t\t: 1;\n\tconst maxMonth =\n\t\tdate.getFullYear() === props.maxDate.getFullYear()\n\t\t\t? props.maxDate.getMonth() + 1\n\t\t\t: 12;\n\tconst minDay =\n\t\tdate.getFullYear() === props.minDate.getFullYear() &&\n\t\tdate.getMonth() === props.minDate.getMonth()\n\t\t\t? props.minDate.getDate()\n\t\t\t: 1;\n\tconst maxDay =\n\t\tdate.getFullYear() === props.maxDate.getFullYear() &&\n\t\tdate.getMonth() === props.maxDate.getMonth()\n\t\t\t? props.maxDate.getDate()\n\t\t\t: moment(new Date(date.getFullYear(), date.getMonth())).daysInMonth();\n\n\tconst mom = moment(date);\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"year\">\n\t\t\t\t<TimelineFor\n\t\t\t\t\tmin={props.minDate.getFullYear()}\n\t\t\t\t\tvalue={date.getFullYear()}\n\t\t\t\t\tmax={props.maxDate?.getFullYear()}\n\t\t\t\t\tonChange={changeYear}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"month\">\n\t\t\t\t<TimelineFor\n\t\t\t\t\tmin={minMonth}\n\t\t\t\t\tvalue={date.getMonth() + 1}\n\t\t\t\t\tmax={maxMonth}\n\t\t\t\t\tonChange={changeMonth}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"day\">\n\t\t\t\t<TimelineFor\n\t\t\t\t\tmin={minDay}\n\t\t\t\t\tvalue={date.getDate()}\n\t\t\t\t\tmax={maxDay}\n\t\t\t\t\tonChange={changeDay}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<Sparklines data={props.dailyImages}>\n\t\t\t\t<ClickableSparklineBars\n\t\t\t\t\theight={100}\n\t\t\t\t\tstyle={{ fill: \"#41c3f9\" }}\n\t\t\t\t\tcalcStyle={(i) => ({\n\t\t\t\t\t\tfill: i === mom.dayOfYear() ? \"#a1d300\" : \"#41c3f9\",\n\t\t\t\t\t})}\n\t\t\t\t\tonClick={(m, i) => setDayOfYear(i)}\n\t\t\t\t\tmargin={0}\n\t\t\t\t/>\n\t\t\t</Sparklines>\n\t\t\t<div className=\"flex flex-row justify-between\">\n\t\t\t\t<div>{ymd(props.minDate)}</div>\n\t\t\t\t<div>{ymd(date)}</div>\n\t\t\t\t<div>{ymd(props.maxDate)}</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction TimelineFor(props: {\n\tmin: number;\n\tvalue: number;\n\tmax: number;\n\tonChange: (i: number) => void;\n}) {\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"flex flex-row w-full justify-between\">\n\t\t\t\t<span>{props.min}</span>\n\t\t\t\t<span>{props.value}</span>\n\t\t\t\t<span>{props.max}</span>\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\ttype=\"range\"\n\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\tmin={props.min}\n\t\t\t\tvalue={props.value}\n\t\t\t\tmax={props.max}\n\t\t\t\tonChange={(el) => {\n\t\t\t\t\tconst year = (el.target as HTMLInputElement).value;\n\t\t\t\t\t// console.log(year);\n\t\t\t\t\tprops.onChange(parseInt(year, 10));\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/Users/depidsvy/dev/pinacotheque/src/stream/Sidebar.tsx",["130","131"],"import React, { FormEvent } from \"react\";\nimport { AppContext, context } from \"../context\";\nimport { Source } from \"../App\";\n\ninterface ISidebarProps {\n\tsources: Source[];\n\tsourceID?: number;\n\tsetSource: (id?: number) => void;\n}\n\ninterface ISidebarState {\n\tminWidth?: number;\n}\n\nexport class Sidebar extends React.Component<ISidebarProps, ISidebarState> {\n\tstatic contextType = context;\n\t// @ts-ignore\n\tcontext: AppContext;\n\n\tstate: ISidebarState = {};\n\n\tconstructor(props: any, context: any) {\n\t\tsuper(props, context);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.postConstruct();\n\t}\n\n\tpostConstruct() {\n\t\tif (this.context) {\n\t\t\tlet minWidth = this.context.sidebar?.minWidth;\n\t\t\tconsole.log(\"setState(minWidth)\", minWidth);\n\t\t\t// this.setState({\n\t\t\t// \tminWidth: minWidth,\n\t\t\t// });\n\t\t\tthis.state.minWidth = minWidth;\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<ul className=\"pb-2\">\n\t\t\t\t\t{this.getSourceLi({ id: undefined, name: \"All\" })}\n\t\t\t\t\t{this.props.sources.map((source: Source) => this.getSourceLi(source))}\n\t\t\t\t</ul>\n\t\t\t\t<form onSubmit={this.onSubmit.bind(this)}>\n\t\t\t\t\t<label htmlFor=\"minWidth\">Min Width</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"u-full-width\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tplaceholder=\"minWidth\"\n\t\t\t\t\t\tid=\"minWidth\"\n\t\t\t\t\t\tname=\"minWidth\"\n\t\t\t\t\t\tdefaultValue={this.state.minWidth}\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\tthis.setState({ minWidth: parseInt(e.target.value) })\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<input className=\"button-primary\" type=\"submit\" value=\"Submit\" />\n\t\t\t\t</form>\n\t\t\t</>\n\t\t);\n\t}\n\n\tprivate getSourceLi(source: { id?: number; name: string }) {\n\t\treturn (\n\t\t\t<li key={source.id}>\n\t\t\t\t<button\n\t\t\t\t\tonClick={(e: React.MouseEvent) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\treturn this.props.setSource(source.id);\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={this.props.sourceID === source.id ? \"active\" : \"\"}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tfontWeight: this.props.sourceID === source.id ? \"bold\" : undefined,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{source.name}\n\t\t\t\t</button>\n\t\t\t</li>\n\t\t);\n\t}\n\n\tonSubmit(e: FormEvent) {\n\t\te.preventDefault();\n\t\tthis.context.setState({\n\t\t\tsidebar: {\n\t\t\t\tminWidth: this.state.minWidth,\n\t\t\t},\n\t\t});\n\t}\n}\n","/Users/depidsvy/dev/pinacotheque/src/stream/ImageStream.tsx",["132"],"import React from \"react\";\nimport axios from \"redaxios\";\nimport { Image } from \"../model/Image\";\nimport moment from \"moment\";\nimport { AppContext, context } from \"../context\";\nimport StreamRenderGallery from \"./stream-render-gallery\";\nimport StreamRenderSimple from \"./stream-render-simple\";\n\ninterface IAppProps {\n\tsourceID?: number;\n}\n\ninterface IAppState {\n\tstart: Date;\n\titems: Image[];\n\tend?: Date;\n}\n\nexport default class ImageStream extends React.Component<IAppProps, IAppState> {\n\tstate: IAppState = {\n\t\tstart: new Date(),\n\t\titems: [],\n\t\tend: undefined,\n\t};\n\n\tstatic contextType = context;\n\t// @ts-ignore\n\tcontext: AppContext;\n\n\tbaseUrl: URL = new URL(document.location.href);\n\n\tcomponentDidMount() {\n\t\tthis.baseUrl = this.context.baseUrl;\n\t\tif (this.context.lastTopTimestamp) {\n\t\t\t// this.setState({\n\t\t\t// \tend: this.context.lastTopTimestamp,\n\t\t\t// });\n\t\t\tthis.state.end = this.context.lastTopTimestamp;\n\t\t}\n\t\tthis.fetchData().then();\n\t}\n\n\tasync fetchData() {\n\t\tconst images = await this.fetchDataFromFilterServer();\n\t\tthis.appendImages(images);\n\t}\n\n\tasync fetchDataFromFilterServer() {\n\t\tconst urlImages = new URL(process.env.REACT_APP_API + \"Images\");\n\t\tthis.appendSearchParams(urlImages);\n\t\t//console.log(urlImages);\n\t\tconst res = await axios.get(urlImages.toString());\n\t\t// console.log(res.data);\n\t\tconst resData = res.data;\n\t\tif (resData.status !== \"ok\") {\n\t\t\tthrow new Error(resData.error);\n\t\t}\n\n\t\tconst images: Image[] = resData.data.map((el: Image) => new Image(el));\n\t\treturn images;\n\t}\n\n\tappendSearchParams(urlImages: URL) {\n\t\tif (this.props.sourceID) {\n\t\t\turlImages.searchParams.set(\"source\", this.props.sourceID.toString());\n\t\t}\n\t\turlImages.searchParams.set(\n\t\t\t\"since\",\n\t\t\tmoment(this.state.end || this.state.start).format(\"YYYY-MM-DD HH:mm:ss\")\n\t\t);\n\t\tlet minWidth = this.context.sidebar?.minWidth;\n\t\tif (minWidth) {\n\t\t\turlImages.searchParams.set(\"minWidth\", minWidth.toString());\n\t\t}\n\t}\n\n\tappendImages(images: any[]) {\n\t\tif (!images.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst lastImage = images[images.length - 1];\n\t\tconst lastDate = lastImage.getTimestamp();\n\t\t// console.log(lastImage, lastDate);\n\t\tthis.setState(\n\t\t\t({ items }) => {\n\t\t\t\t// append if not id exists\n\t\t\t\timages.map((nnew: Image) => {\n\t\t\t\t\tif (!items.some((el) => el.id === nnew.id)) {\n\t\t\t\t\t\tnnew.baseUrl = this.baseUrl?.toString();\n\t\t\t\t\t\treturn items.push(nnew);\n\t\t\t\t\t}\n\t\t\t\t\treturn \"x\";\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\titems,\n\t\t\t\t\tend: lastDate,\n\t\t\t\t};\n\t\t\t},\n\t\t\t() => {\n\t\t\t\t// console.log(this.state.items.map((el: Image) => el.id));\n\t\t\t}\n\t\t);\n\t}\n\n\tget queryParams() {\n\t\tconst url = new URL(document.location.href);\n\t\treturn url.searchParams;\n\t}\n\n\trender() {\n\t\tconsole.log(this.state.items.length);\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"p-2\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackground: \"#33C3F0\",\n\t\t\t\t\t\tposition: \"sticky\",\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tzIndex: 100,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tImages: {this.state.items.length}\n\t\t\t\t</div>\n\t\t\t\t{this.queryParams.has(\"simple\") ? (\n\t\t\t\t\t<StreamRenderSimple\n\t\t\t\t\t\tphotos={this.state.items}\n\t\t\t\t\t\tnext={this.fetchData.bind(this)}\n\t\t\t\t\t\trefresh={this.refresh.bind(this)}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<StreamRenderGallery\n\t\t\t\t\t\tphotos={this.state.items}\n\t\t\t\t\t\tnext={this.fetchData.bind(this)}\n\t\t\t\t\t\trefresh={this.refresh.bind(this)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcomponentDidUpdate(\n\t\tprevProps: Readonly<IAppProps>,\n\t\tnextState: Readonly<IAppState>,\n\t\tnextContext: any\n\t): boolean {\n\t\tconst yes = this.props.sourceID !== prevProps.sourceID;\n\t\tif (yes) {\n\t\t\tthis.setState({ items: [], start: new Date(), end: undefined }, () =>\n\t\t\t\tthis.fetchData().then()\n\t\t\t);\n\t\t}\n\t\treturn yes;\n\t}\n\n\trefresh() {\n\t\tconsole.log(\"refresh\");\n\t}\n}\n","/Users/depidsvy/dev/pinacotheque/src/browse/scan-meta.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/functions.ts",[],"/Users/depidsvy/dev/pinacotheque/src/widgets/clickable-sparkline-bars.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/stream/stream-render-simple.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/stream/stream-render-gallery.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/stream/GalleryInScroll.tsx",[],"/Users/depidsvy/dev/pinacotheque/src/stream/my-gallery.tsx",["133"],"import React from \"react\";\nimport Gallery, { PhotoProps, RenderImageProps } from \"react-photo-gallery\";\nimport { MyPhoto } from \"./MyPhoto\";\n// @ts-ignore\nimport IntersectionVisible from \"react-intersection-visible\";\nimport { Image } from \"../model/Image\";\nimport { PhotoSetItem } from \"./GalleryInScroll\";\nimport TrackVisibility from \"react-on-screen\";\nconst VisibilitySensor = require(\"react-visibility-sensor\");\n\n/**\n * @deprecated temporary not used\n * @param props\n */\nclass ImageRenderIntersection extends React.Component<\n\tRenderImageProps<PhotoProps<PhotoSetItem>>\n> {\n\trender() {\n\t\treturn (\n\t\t\t<IntersectionVisible\n\t\t\t\tkey={this.props.photo.key}\n\t\t\t\t// onIntersect={ e => this.onIntersect( e ) }\n\t\t\t\tonHide={(e: any) =>\n\t\t\t\t\tthis.props.photo.image && this.onImageHide(e, this.props.photo.image)\n\t\t\t\t}\n\t\t\t\tonShow={(e: any) =>\n\t\t\t\t\tthis.props.photo.image && this.onImageShow(e, this.props.photo.image)\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<MyPhoto\n\t\t\t\t\tkey={this.props.photo.key}\n\t\t\t\t\tindex={this.props.index}\n\t\t\t\t\tdirection={this.props.direction}\n\t\t\t\t\tleft={this.props.left}\n\t\t\t\t\ttop={this.props.top}\n\t\t\t\t\tphoto={this.props.photo}\n\t\t\t\t\tonClick={(index: any) => {\n\t\t\t\t\t\tconsole.log(\"click\", index);\n\t\t\t\t\t\t// this.props.openLightbox(this.props.index);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</IntersectionVisible>\n\t\t);\n\t}\n\n\tprivate onImageShow(e: IntersectionObserverEntry, image: Image) {\n\t\t// console.log('show', e);\n\t\t// this.context.setState({\n\t\t// \t[AppContext.VIEWPORT_TIMESTAMP]: image.date,\n\t\t// });\n\t}\n\n\tprivate onImageHide(e: IntersectionObserverEntry, image: Image) {\n\t\t// console.log('hide', e);\n\t}\n}\n\ninterface Props {\n\tphotos: PhotoSetItem[];\n\topenLightbox: (index: number) => void;\n}\n\nexport class MyGallery extends React.Component<Props, any> {\n\timageRender(props: RenderImageProps<PhotoProps<PhotoSetItem>>) {\n\t\treturn (\n\t\t\t<MyPhoto\n\t\t\t\tindex={props.index}\n\t\t\t\tphoto={props.photo}\n\t\t\t\tdirection={props.direction}\n\t\t\t\tleft={props.left}\n\t\t\t\ttop={props.top}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tthis.props.openLightbox(props.index);\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\t}\n\n\timageRenderVisibilitySensor(\n\t\tprops: RenderImageProps<PhotoProps<PhotoSetItem>>\n\t) {\n\t\treturn (\n\t\t\t<VisibilitySensor>\n\t\t\t\t{({ isVisible }: { isVisible: boolean }) =>\n\t\t\t\t\tisVisible ? (\n\t\t\t\t\t\t<MyPhoto\n\t\t\t\t\t\t\tindex={props.index}\n\t\t\t\t\t\t\tphoto={props.photo}\n\t\t\t\t\t\t\tdirection={props.direction}\n\t\t\t\t\t\t\tleft={props.left}\n\t\t\t\t\t\t\ttop={props.top}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.props.openLightbox(props.index);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{ width: props.photo.width, height: props.photo.height }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</VisibilitySensor>\n\t\t);\n\t}\n\n\timageRenderOnScreen(props: RenderImageProps<PhotoProps<PhotoSetItem>>) {\n\t\treturn (\n\t\t\t<TrackVisibility partialVisibility={true} key={props.photo.key}>\n\t\t\t\t{({ isVisible }: { isVisible: boolean }) =>\n\t\t\t\t\tisVisible ? (\n\t\t\t\t\t\t<MyPhoto\n\t\t\t\t\t\t\tkey={props.photo.key}\n\t\t\t\t\t\t\tindex={props.index}\n\t\t\t\t\t\t\tphoto={props.photo}\n\t\t\t\t\t\t\tdirection={props.direction}\n\t\t\t\t\t\t\tleft={props.left}\n\t\t\t\t\t\t\ttop={props.top}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.props.openLightbox(props.index);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{ width: props.photo.width, height: props.photo.height }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</TrackVisibility>\n\t\t);\n\t}\n\n\trender() {\n\t\t// @ts-ignore\n\t\treturn (\n\t\t\t<Gallery\n\t\t\t\tdirection=\"row\"\n\t\t\t\tcolumns={4}\n\t\t\t\ttargetRowHeight={256}\n\t\t\t\tmargin={5}\n\t\t\t\tphotos={this.props.photos}\n\t\t\t\trenderImage={this.imageRender.bind(this)}\n\t\t\t\t// renderImage={this.imageRenderVisibilitySensor.bind(this)}\n\t\t\t\t// renderImage={this.imageRenderOnScreen.bind(this)}\n\t\t\t\t// renderImage={(props: RenderImageProps<any>) => (\n\t\t\t\t// \t<ImageRenderIntersection {...props} />\n\t\t\t\t// )}\n\t\t\t/>\n\t\t);\n\t}\n}\n","/Users/depidsvy/dev/pinacotheque/src/folders/folders-page.tsx",[],{"ruleId":"134","replacedBy":"135"},{"ruleId":"136","replacedBy":"137"},{"ruleId":"138","severity":1,"message":"139","line":7,"column":10,"nodeType":"140","messageId":"141","endLine":7,"endColumn":17},{"ruleId":"138","severity":1,"message":"142","line":2,"column":22,"nodeType":"140","messageId":"141","endLine":2,"endColumn":38},{"ruleId":"138","severity":1,"message":"143","line":1,"column":17,"nodeType":"140","messageId":"141","endLine":1,"endColumn":28},{"ruleId":"138","severity":1,"message":"144","line":3,"column":22,"nodeType":"140","messageId":"141","endLine":3,"endColumn":36},{"ruleId":"145","severity":1,"message":"146","line":22,"column":2,"nodeType":"147","messageId":"148","endLine":24,"endColumn":3},{"ruleId":"149","severity":1,"message":"150","line":37,"column":4,"nodeType":"151","endLine":37,"endColumn":14},{"ruleId":"149","severity":1,"message":"150","line":38,"column":4,"nodeType":"151","endLine":38,"endColumn":14},{"ruleId":"138","severity":1,"message":"152","line":15,"column":7,"nodeType":"140","messageId":"141","endLine":15,"endColumn":30},"no-native-reassign",["153"],"no-negated-in-lhs",["154"],"@typescript-eslint/no-unused-vars","'Sidebar' is defined but never used.","Identifier","unusedVar","'RenderImageProps' is defined but never used.","'ChangeEvent' is defined but never used.","'SparklinesBars' is defined but never used.","@typescript-eslint/no-useless-constructor","Useless constructor.","MethodDefinition","noUselessConstructor","react/no-direct-mutation-state","Do not mutate state directly. Use setState().","MemberExpression","'ImageRenderIntersection' is defined but never used.","no-global-assign","no-unsafe-negation"]