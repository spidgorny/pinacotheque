[{"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\index.tsx":"1","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\App.tsx":"2","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\context.ts":"3","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\test.object.assign.ts":"4","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\ImageStream.tsx":"5","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\Sidebar.tsx":"6","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\model\\ImageFromFilter.ts":"7","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\model\\Image.ts":"8","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\GalleryInScroll.tsx":"9","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\MyPhoto.tsx":"10","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\my-gallery.tsx":"11","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\widgets\\header.tsx":"12","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\browse-page.tsx":"13","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\check-md5.tsx":"14","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\one-source-page.tsx":"15","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\check-source.tsx":"16"},{"size":232,"mtime":1611940295847,"results":"17","hashOfConfig":"18"},{"size":2679,"mtime":1612216671420,"results":"19","hashOfConfig":"18"},{"size":1074,"mtime":1612132311656,"results":"20","hashOfConfig":"18"},{"size":215,"mtime":1611940295898,"results":"21","hashOfConfig":"18"},{"size":4194,"mtime":1612132496552,"results":"22","hashOfConfig":"18"},{"size":1283,"mtime":1611952090388,"results":"23","hashOfConfig":"18"},{"size":354,"mtime":1611951917523,"results":"24","hashOfConfig":"18"},{"size":3860,"mtime":1611951888613,"results":"25","hashOfConfig":"18"},{"size":2214,"mtime":1611950367369,"results":"26","hashOfConfig":"18"},{"size":1653,"mtime":1612132289704,"results":"27","hashOfConfig":"18"},{"size":1553,"mtime":1611950367375,"results":"28","hashOfConfig":"18"},{"size":490,"mtime":1612172171467,"results":"29","hashOfConfig":"18"},{"size":1639,"mtime":1612218860724,"results":"30","hashOfConfig":"18"},{"size":2852,"mtime":1612219120873,"results":"31","hashOfConfig":"18"},{"size":1056,"mtime":1612218669683,"results":"32","hashOfConfig":"18"},{"size":1354,"mtime":1612218942249,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"1pqf0us",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\index.tsx",[],["68","69"],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\App.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\context.ts",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\test.object.assign.ts",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\ImageStream.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\Sidebar.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\model\\ImageFromFilter.ts",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\model\\Image.ts",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\GalleryInScroll.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\MyPhoto.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\my-gallery.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\widgets\\header.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\browse-page.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\check-md5.tsx",["70","71"],"import { Source } from \"../App\";\nimport { useCallback, useContext, useEffect, useState } from \"react\";\nimport { context } from \"../context\";\nimport { BarLoader } from \"react-spinners\";\n// @ts-ignore\nimport ndjsonStream from \"can-ndjson-stream\";\n\nexport default function CheckMD5(props: { source: Source }) {\n  const ctx = useContext(context);\n  const [loading, setLoading] = useState(false);\n  const [folders, setFolders] = useState([] as string[]);\n  const [md5, setMD5] = useState(\"\");\n  const [error, setError] = useState((null as unknown) as string);\n\n  const fetchData = async () => {\n    setFolders([]);\n    setLoading(true);\n    setError(\"\");\n    const urlCheck = new URL(\"SourceScan\", ctx.baseUrl);\n    urlCheck.searchParams.set(\"id\", props.source.id.toString());\n    const res = await fetch(urlCheck.toString());\n    console.warn(urlCheck.toString(), res.status, res.statusText);\n    if (res.status !== 200) {\n      setError(res.statusText);\n      setLoading(false);\n      return;\n    }\n    const exampleReader = ndjsonStream(res.body).getReader();\n\n    let result:\n      | {\n          done: boolean;\n          value?: { status: string; file: string[]; md5?: string };\n        }\n      | undefined;\n    while (!result || !result.done) {\n      result = await exampleReader.read();\n      // console.log(result);\n      if (result && result.value) {\n        // skip errors (status === 'err')\n        if (\"file\" in result.value && result.value.status === \"lines\") {\n          // @ts-ignore\n          setFolders((folders) => folders.concat(...result.value.file));\n        }\n        if (\"md5\" in result.value) {\n          setMD5(result.value.md5 ?? \"\");\n          setLoading(false);\n        }\n      }\n    }\n  };\n\n  // autostart fetchData() is disabled as this is heavy load on the server\n  useEffect(() => {\n    // noinspection JSIgnoredPromiseFromCall\n    // fetchData();\n  }, [props.source]);\n\n  if (!folders) {\n    return <BarLoader loading={true} />;\n  }\n\n  const loadingProgress = loading ? (\n    <div>\n      <div>\n        Dir: {folders.length}/{props.source.folders}\n      </div>\n      <progress\n        value={folders.length}\n        max={props.source.folders}\n        className=\"w-full\"\n      />\n    </div>\n  ) : null;\n\n  const afterScan = folders?.length ? (\n    <div>\n      <div>Dir: {folders?.length ?? props.source.folders}</div>\n      <div>\n        MD5:{\" \"}\n        <span\n          className={md5 === props.source.md5 ? \"bg-green-300\" : \"bg-red-300\"}\n        >\n          {md5}\n        </span>\n      </div>\n    </div>\n  ) : null;\n\n  return (\n    <div className=\"\">\n      <button\n        className=\"bg-yellow-300 p-1 rounded\"\n        onClick={fetchData}\n        disabled={loading}\n      >\n        Rescan\n      </button>\n      {loadingProgress}\n      {afterScan}\n      {error && <div className=\"bg-red-300\">{error}</div>}\n    </div>\n  );\n}\n","C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\one-source-page.tsx",[],"C:\\AnypointStudio\\AnypointStudio\\slawa2021\\pinacotheque\\src\\browse\\check-source.tsx",["72"],{"ruleId":"73","replacedBy":"74"},{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","severity":1,"message":"78","line":2,"column":10,"nodeType":"79","messageId":"80","endLine":2,"endColumn":21},{"ruleId":"81","severity":1,"message":"82","line":43,"column":22,"nodeType":"83","messageId":"84","endLine":43,"endColumn":71},{"ruleId":"85","severity":1,"message":"86","line":36,"column":6,"nodeType":"87","endLine":36,"endColumn":20,"suggestions":"88"},"no-native-reassign",["89"],"no-negated-in-lhs",["90"],"@typescript-eslint/no-unused-vars","'useCallback' is defined but never used.","Identifier","unusedVar","no-loop-func","Function declared in a loop contains unsafe references to variable(s) 'result'.","ArrowFunctionExpression","unsafeRefs","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","ArrayExpression",["91"],"no-global-assign","no-unsafe-negation",{"desc":"92","fix":"93"},"Update the dependencies array to be: [fetchData, props.source]",{"range":"94","text":"95"},[976,990],"[fetchData, props.source]"]